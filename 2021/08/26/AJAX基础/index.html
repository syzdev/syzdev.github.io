<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;light&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><link rel="icon" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="syz"><meta name="keywords" content=""><title>AJAX基础 - syzdev</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"yoursite.com",root:"/",version:"1.8.10",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:1},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:35vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>😄 syzdev</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://cdn.u1.huluxia.com/g3/M02/4D/6C/wKgBOV6fEU2AXFGSAAJ7A1Fp7rw147.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="AJAX基础"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-08-26 21:46" pubdate>2021年8月26日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 3.2k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 47 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">AJAX基础</h1><div class="markdown-body"><h1 id="1-ajax简介"><a class="markdownIt-Anchor" href="#1-ajax简介"></a> 1 AJAX简介</h1><p>Ajax = Asynchronous Javascript And XML，即异步JavaScript和XML，它最大的特点就是能够在网页不刷新的情况下向服务端发送HTTP请求，然后得到HTTP响应。AJAX不是新的编程语言，而是一种将现有的标准组合在一起使用的新方式。</p><h2 id="11-ajax的优点"><a class="markdownIt-Anchor" href="#11-ajax的优点"></a> 1.1 AJAX的优点</h2><ul><li>可以无需刷新页面与服务器进行交互</li><li>运行根据用户事件来更新部分页面内容</li></ul><h2 id="12-ajax的缺点"><a class="markdownIt-Anchor" href="#12-ajax的缺点"></a> 1.2 AJAX的缺点</h2><ul><li>没有浏览历史，不能回退</li><li>存在跨域问题</li><li>SEO问题</li></ul><h1 id="2-xml简介"><a class="markdownIt-Anchor" href="#2-xml简介"></a> 2 XML简介</h1><p>之所以在AJAX中提到XML是因为最初AJAX在进行数据交换的时候就是使用XML格式的数据（服务端给客户端返回的数据就是XML格式的，客户端再解析XML得到数据），XML 指可扩展标记语言（eXtensible Markup Language），XML 被设计用来传输和存储数据，如：</p><figure class="highlight xml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">note</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">to</span>&gt;</span>Tove<span class="hljs-tag">&lt;/<span class="hljs-name">to</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">from</span>&gt;</span>Jani<span class="hljs-tag">&lt;/<span class="hljs-name">from</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">heading</span>&gt;</span>Reminder<span class="hljs-tag">&lt;/<span class="hljs-name">heading</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>Don&#x27;t forget me this weekend!<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">note</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>可以看到XML和HTML类似，不同的是HTML中都是预定义标签，而XML中没有预定义标签，全部都是自定义标签。<br>不过现在进行AJAX操作时，不再使用XML了，都是使用JSON格式了，这种数据格式更加灵活方便。</p><h1 id="3-json简介"><a class="markdownIt-Anchor" href="#3-json简介"></a> 3 JSON简介</h1><p>JSON = JavaScript Object Notation，即JavaScript 对象表示法，JSON 是存储和交换文本信息的语法，类似 XML。JSON 比 XML 更小、更快，更易解析，如：</p><figure class="highlight json"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;sites&quot;</span>: [<br>      &#123; <span class="hljs-attr">&quot;name&quot;</span>:<span class="hljs-string">&quot;百度&quot;</span> , <span class="hljs-attr">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.baidu.com&quot;</span> &#125;, <br>      &#123; <span class="hljs-attr">&quot;name&quot;</span>:<span class="hljs-string">&quot;谷歌&quot;</span> , <span class="hljs-attr">&quot;url&quot;</span>:<span class="hljs-string">&quot;www.google.com&quot;</span> &#125;, <br>    ]<br>&#125;<br></code></pre></div></td></tr></table></figure><h1 id="4-http协议请求报文与响应报文的格式"><a class="markdownIt-Anchor" href="#4-http协议请求报文与响应报文的格式"></a> 4 HTTP协议请求报文与响应报文的格式</h1><p>HTTP = HyperText Transfer Protocol，即超文本传输协议，协议详细规定了浏览器和万维网服务器之间互相通信的规则。</p><h2 id="41-请求报文"><a class="markdownIt-Anchor" href="#41-请求报文"></a> 4.1 请求报文</h2><p>一个HTTP请求报文由请求行（request line）、请求头部（header）、空行和请求数据4个部分组成，下图给出了请求报文的一般格式：<br><img src="https://img-blog.csdnimg.cn/876d38bed9064ebd812dd84d791900c9.png" srcset="/img/loading.gif" lazyload alt=""></p><h2 id="42-响应报文"><a class="markdownIt-Anchor" href="#42-响应报文"></a> 4.2 响应报文</h2><p>HTTP响应报文由状态行、响应头部、空行 和 响应包体 4 个部分组成，如下图所示：<br><img src="https://img-blog.csdnimg.cn/a69f0a2501ee4804ab2dac440c3d1fa5.png" srcset="/img/loading.gif" lazyload alt=""></p><h1 id="5-ajax请求的基本操作"><a class="markdownIt-Anchor" href="#5-ajax请求的基本操作"></a> 5 AJAX请求的基本操作</h1><p>新建文件夹，输入命令：<code>npm init --yes</code>，初始化项目，输入<code>npm i express</code>安装Express框架，新建<code>express.js</code>，添加如下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><span class="hljs-keyword">const</span> app = express()<br>app.get(<span class="hljs-string">&#x27;/msg&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 设置响应头，允许跨域</span><br>  response.setHeader(<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>)<br>  <span class="hljs-comment">// 设置响应体</span><br>  response.send(<span class="hljs-string">&#x27;ok&#x27;</span>)<br>&#125;)<br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;服务已启动，监听3000端口&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>输入<code>node express.js</code>命令后即可启动服务（建议使用nodemon工具，输入命令<code>nodemon express.js</code>后可以实现热更新）。在页面中发送请求的代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>  xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>)<br>  xhr.send()<br>  xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// 服务端返回了所有结果</span><br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;<br>      <span class="hljs-comment">// 响应成功，状态码首位为2时，代表请求成功</span><br>      <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-comment">// 1.响应行</span><br>        <span class="hljs-built_in">console</span>.log(xhr.status)<br>        <span class="hljs-comment">// 2.响应状态字符串</span><br>        <span class="hljs-built_in">console</span>.log(xhr.statusText)<br>        <span class="hljs-comment">// 3.所有响应头</span><br>        <span class="hljs-built_in">console</span>.log(xhr.getAllResponseHeaders())<br>        <span class="hljs-comment">// 4.响应体</span><br>        <span class="hljs-built_in">console</span>.log(xhr.response)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>控制台输出结果如下：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-number">200</span><br>OK<br>content-length: <span class="hljs-number">2</span><br>content-type: text/html; charset=utf-<span class="hljs-number">8</span><br>ok<br></code></pre></div></td></tr></table></figure><h1 id="6-ajax设置请求参数"><a class="markdownIt-Anchor" href="#6-ajax设置请求参数"></a> 6 AJAX设置请求参数</h1><p>请求参数的添加方法可以在请求URL后面跟上“<code>?</code>”，再接上等式，如“<code>?a=1</code>”，若需要添加多个参数，则使用“<code>&amp;</code>”分隔即可：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg?a=1&amp;b=2&#x27;</span>)<br></code></pre></div></td></tr></table></figure><p>发送请求后，可以在Chrome浏览器的开发者调试工具“Network”中选择该请求，在右侧的“Headers”中看到“Query String Parameters”：<br><img src="https://img-blog.csdnimg.cn/b8332a14b4f448f78b57c618274c3f74.png" srcset="/img/loading.gif" lazyload alt=""></p><h1 id="7-ajax发送post请求"><a class="markdownIt-Anchor" href="#7-ajax发送post请求"></a> 7 AJAX发送POST请求</h1><p>在<code>express.js</code>中添加处理POST请求的路由：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">  const express = require(&#x27;express&#x27;)<br>  const app = express()<br>  app.get(&#x27;/msg&#x27;, (request, response) =&gt; &#123;<br>    // 设置响应头，运行跨域<br>    response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)<br>    // 设置响应体<br>    response.send(&#x27;ok&#x27;)<br>  &#125;)<br><span class="hljs-addition">+  app.post(&#x27;/msg&#x27;, (request, response) =&gt; &#123;</span><br><span class="hljs-addition">+    response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)</span><br><span class="hljs-addition">+    response.send(&#x27;POST OK&#x27;)</span><br><span class="hljs-addition">+  &#125;)</span><br>  app.listen(3000, () =&gt; &#123;<br>    console.log(&#x27;服务已启动，监听3000端口&#x27;)<br>  &#125;)<br></code></pre></div></td></tr></table></figure><p>页面中发送请求的代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>)<br>xhr.send()<br>xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;<br>    <span class="hljs-comment">// 响应成功，状态码首位为2时，代表请求成功</span><br>    <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;<br>      <span class="hljs-built_in">console</span>.log(xhr.response)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>发送请求后输出：“POST OK”。另外，在发送POST请求时可以手动设置请求体，可以把请求体放在<code>xhr.send()</code>的参数中：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br>      xhr.open(&#x27;POST&#x27;, &#x27;http://127.0.0.1:3000/msg&#x27;)<br><span class="hljs-addition">+      xhr.send(&#x27;a=1&amp;b=2&#x27;)</span><br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          // 响应成功，状态码首位为2时，代表请求成功<br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>发送POST请求后，可以在开发者调试工具中看到：<br><img src="https://img-blog.csdnimg.cn/42ca93f718714f7b87f5151f7d1abebc.png" srcset="/img/loading.gif" lazyload alt=""></p><h1 id="8-ajax中设置请求头信息"><a class="markdownIt-Anchor" href="#8-ajax中设置请求头信息"></a> 8 AJAX中设置请求头信息</h1><p>设置请求头的方法为<code>setRequestHeader</code>，它必须在<code>open</code>后<code>send</code>前，如：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br>      xhr.open(&#x27;POST&#x27;, &#x27;http://127.0.0.1:3000/msg&#x27;)<br>      // 设置请求头信息<br><span class="hljs-addition">+      xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;)</span><br>      xhr.send(&#x27;a=1&amp;b=2&#x27;)<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>此外还可以自定义请求头，如：<code>xhr.setRequestHeader('MyRequestHeader', 'test')</code>，不过设置这种请求头后发送请求会触发安全机制。</p><h1 id="9-服务端响应json数据"><a class="markdownIt-Anchor" href="#9-服务端响应json数据"></a> 9 服务端响应JSON数据</h1><p>在<code>express.js</code>中添加如下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.get(<span class="hljs-string">&#x27;/json&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;<br>  response.setHeader(<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>)<br>  <span class="hljs-keyword">const</span> jsonData = &#123;<br>    name: <span class="hljs-string">&#x27;syz&#x27;</span><br>  &#125;<br>  <span class="hljs-comment">// 对对象进行字符串转换</span><br>  <span class="hljs-keyword">let</span> str = <span class="hljs-built_in">JSON</span>.stringify(jsonData)<br>  <span class="hljs-comment">// send只能发送字符串</span><br>  response.send(str)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>发送请求的代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>  xhr.open(<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/json&#x27;</span>)<br>  xhr.send()<br>  xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;<br>      <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-built_in">console</span>.log(xhr.response)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>输出结果：<code>&#123;&quot;name&quot;:&quot;syz&quot;&#125;</code>，注意这里只是字符串的形式，客户端要对该数据进行处理，则需要将字符串转换为对象：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br>      xhr.open(&#x27;GET&#x27;, &#x27;http://127.0.0.1:3000/json&#x27;)<br>      xhr.send()<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br><span class="hljs-addition">+          	 // 字符串转换为对象</span><br><span class="hljs-addition">+            let data = JSON.parse(xhr.response)</span><br><span class="hljs-addition">+            console.log(data)</span><br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>这样输出的结果就为对象的形式。此外还有一种自动转换的方式，这种方式需要借助于<code>XMLHttpRequest</code>对象上的<code>respnseType</code>属性：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br><span class="hljs-addition">+      // 将响应类型设置为json</span><br><span class="hljs-addition">+      xhr.responseType = &#x27;json&#x27;</span><br>      xhr.open(&#x27;GET&#x27;, &#x27;http://127.0.0.1:3000/json&#x27;)<br>      xhr.send()<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>这样输出的结果也是对象的形式，这种方式更加的方便。</p><h1 id="10-ajax请求超时与异常处理"><a class="markdownIt-Anchor" href="#10-ajax请求超时与异常处理"></a> 10 AJAX请求超时与异常处理</h1><p>修改<code>express.js</code>中的<code>msg</code>接口，将其设置为4秒后再返回结果：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.post(<span class="hljs-string">&#x27;/msg&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">request, response</span>) =&gt;</span> &#123;<br>  response.setHeader(<span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="hljs-string">&#x27;*&#x27;</span>)<br>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    response.send(<span class="hljs-string">&#x27;POST OK&#x27;</span>)<br>  &#125;, <span class="hljs-number">4000</span>);<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>页面中的访问方法如下：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>  <span class="hljs-comment">// 超时设置，设置为2秒，若2秒后还没有得到结果，则请求取消</span><br>  xhr.timeout = <span class="hljs-number">2000</span><br>  xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>)<br>  xhr.send()<br>  xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;<br>      <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-built_in">console</span>.log(xhr.response)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>发送请求后可以看到请求的状态在2秒后变为了<code>canceled</code>：<br><img src="https://img-blog.csdnimg.cn/2dfd32f769844a02982bbcc3e93cd08b.png" srcset="/img/loading.gif" lazyload alt=""><br>还可以为超时设置回调函数，如：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br>      // 超时设置，设置为2秒，若2秒后还没有得到结果，则请求取消<br>      xhr.timeout = 2000<br><span class="hljs-addition">+      // 超时回调</span><br><span class="hljs-addition">+      xhr.ontimeout = function() &#123;</span><br><span class="hljs-addition">+        console.log(&#x27;请求超时，请稍后再试！&#x27;)</span><br><span class="hljs-addition">+      &#125;</span><br>      xhr.open(&#x27;POST&#x27;, &#x27;http://127.0.0.1:3000/msg&#x27;)<br>      xhr.send()<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><p>还可以设置网络异常的回调，如没有网络：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff">    function send() &#123;<br>      const xhr = new XMLHttpRequest()<br>      // 超时设置，设置为2秒，若2秒后还没有得到结果，则请求取消<br>      xhr.timeout = 2000<br>      // 超时回调<br>      xhr.ontimeout = function() &#123;<br>        console.log(&#x27;请求超时，请稍后再试！&#x27;)<br>      &#125;<br><span class="hljs-addition">+      // 异常回调</span><br><span class="hljs-addition">+      xhr.onerror = function() &#123;</span><br><span class="hljs-addition">+        console.log(&#x27;网络异常，请检查网络连接是否正确！&#x27;)</span><br><span class="hljs-addition">+      &#125;</span><br>      xhr.open(&#x27;POST&#x27;, &#x27;http://127.0.0.1:3000/msg&#x27;)<br>      xhr.send()<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></div></td></tr></table></figure><h1 id="11-ajax取消请求"><a class="markdownIt-Anchor" href="#11-ajax取消请求"></a> 11 AJAX取消请求</h1><p>取消请求需要使用<code>XMLHttpRequest</code>上的<code>abort</code>方法：</p><figure class="highlight diff"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs diff"><span class="hljs-addition">+    let xhr = null</span><br><br>    function send() &#123;<br>      xhr = new XMLHttpRequest()<br>      xhr.open(&#x27;POST&#x27;, &#x27;http://127.0.0.1:3000/msg&#x27;)<br>      xhr.send()<br>      xhr.onreadystatechange = function() &#123;<br>        if (xhr.readyState <span class="hljs-comment">=== 4) &#123;</span><br>          if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123;<br>            console.log(xhr.response)<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br><span class="hljs-addition">+    function cancelSend() &#123;</span><br><span class="hljs-addition">+      xhr.abort()</span><br><span class="hljs-addition">+    &#125;</span><br></code></pre></div></td></tr></table></figure><h1 id="12-ajax处理重复请求"><a class="markdownIt-Anchor" href="#12-ajax处理重复请求"></a> 12 AJAX处理重复请求</h1><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> xhr = <span class="hljs-literal">null</span><br><span class="hljs-comment">// 标识变量，当前是否在发送AJAX请求</span><br><span class="hljs-keyword">let</span> isSending = <span class="hljs-literal">false</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// 如果已经发送了，则取消上一次的请求，创建一个新的请求</span><br>  <span class="hljs-keyword">if</span> (isSending) &#123;<br>    xhr.abort()<br>  &#125;<br>  <span class="hljs-comment">// 在发送请求</span><br>  isSending = <span class="hljs-literal">true</span><br>  xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()<br>  xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>, <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>)<br>  xhr.send()<br>  xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) &#123;<br>      <span class="hljs-comment">// 发送请求成功</span><br>      isSending = <span class="hljs-literal">false</span><br>      <span class="hljs-keyword">if</span> (xhr.status &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.status &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-built_in">console</span>.log(xhr.response)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h1 id="13-jquery中发送ajax请求"><a class="markdownIt-Anchor" href="#13-jquery中发送ajax请求"></a> 13 JQuery中发送AJAX请求</h1><h2 id="131-发送get请求"><a class="markdownIt-Anchor" href="#131-发送get请求"></a> 13.1 发送GET请求</h2><p>第一个参数为请求的URL，第二个参数为请求参数，第二个参数为请求的回调。</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">$.get(<span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>, &#123;<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(data)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>还可以传入第四个参数，第四个参数则是响应体类型，如：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">$.get(<span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>, &#123;<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(data)<br>&#125;, <span class="hljs-string">&#x27;json&#x27;</span>)<br></code></pre></div></td></tr></table></figure><p>这里就将响应体的类型设置为了JSON格式。</p><h2 id="132-发送post请求"><a class="markdownIt-Anchor" href="#132-发送post请求"></a> 13.2 发送POST请求</h2><p>发送POST请求的方法与发送GET请求的方法类似：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">$.post(<span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>, &#123;<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br>  <span class="hljs-built_in">console</span>.log(data)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="133-发送请求通用方法"><a class="markdownIt-Anchor" href="#133-发送请求通用方法"></a> 13.3 发送请求通用方法</h2><p>JQuery中发送请求的通用方法为<code>$</code>对象上的<code>ajax</code>方法，该方法接收的参数为一个对象：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">$.ajax(&#123;<br>  <span class="hljs-comment">// url</span><br>  url: <span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>,<br>  <span class="hljs-comment">// 参数</span><br>  data: &#123;<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">b</span>:<span class="hljs-number">2</span>&#125;,<br>  <span class="hljs-comment">// 请求类型</span><br>  type: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>  <span class="hljs-comment">// 响应体结果的类型</span><br>  dataType: <span class="hljs-string">&#x27;json&#x27;</span>,<br>  <span class="hljs-comment">// 成功的回调</span><br>  success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(data)<br>  &#125;,<br>  <span class="hljs-comment">// 失败的回调 </span><br>  error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;err&#x27;</span>)<br>  &#125;,<br>  <span class="hljs-comment">// 超时时间</span><br>  timeout: <span class="hljs-number">4000</span>,<br>  <span class="hljs-comment">// 头信息</span><br>  headers: &#123;<br>    <span class="hljs-comment">// MyHeaders: 123</span><br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><h1 id="14-axios中发送ajax请求"><a class="markdownIt-Anchor" href="#14-axios中发送ajax请求"></a> 14 Axios中发送AJAX请求</h1><p>Axios是目前前端领域中最热门的AJAX工具库，也是Vue和React官方推荐的工具库。</p><h2 id="141-axios发送get请求"><a class="markdownIt-Anchor" href="#141-axios发送get请求"></a> 14.1 Axios发送GET请求</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://127.0.0.1:3000&#x27;</span><br>axios.get(<span class="hljs-string">&#x27;/msg&#x27;</span>, &#123;<br>  <span class="hljs-comment">// url参数</span><br>  params: &#123;<br>    a: <span class="hljs-number">1</span>,<br>    b: <span class="hljs-number">2</span><br>  &#125;,<br>  <span class="hljs-comment">// 设置请求头信息</span><br>  headers: &#123;<br>    MyHeaders: <span class="hljs-number">123</span><br>  &#125;<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// 基于Promise</span><br>  <span class="hljs-built_in">console</span>.log(value)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="142-axios发送post请求"><a class="markdownIt-Anchor" href="#142-axios发送post请求"></a> 14.2 Axios发送POST请求</h2><p>发送POST请求可以设置请求体信息，放在<code>post</code>方法的第二个参数：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://127.0.0.1:3000&#x27;</span><br>axios.post(<span class="hljs-string">&#x27;/msg&#x27;</span>, &#123;<br>  username: <span class="hljs-string">&#x27;admin&#x27;</span>,<br>  password: <span class="hljs-string">&#x27;123456&#x27;</span><br>&#125;, &#123;<br>  <span class="hljs-comment">// url参数</span><br>  params: &#123;<br>    a: <span class="hljs-number">1</span>,<br>    b: <span class="hljs-number">2</span><br>  &#125;,<br>  <span class="hljs-comment">// 设置请求头信息</span><br>  headers: &#123;<br>    MyHeaders: <span class="hljs-number">123</span><br>  &#125;,<br>&#125;).then(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// 基于Promise</span><br>  <span class="hljs-built_in">console</span>.log(value)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="143-axios发送请求通用方法"><a class="markdownIt-Anchor" href="#143-axios发送请求通用方法"></a> 14.3 Axios发送请求通用方法</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.defaults.baseURL = <span class="hljs-string">&#x27;http://127.0.0.1:3000&#x27;</span><br>axios(&#123;<br>  <span class="hljs-comment">// 请求方法</span><br>  method: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>  <span class="hljs-comment">// url</span><br>  url: <span class="hljs-string">&#x27;/msg&#x27;</span>,<br>  <span class="hljs-comment">// url参数</span><br>  params: &#123;<br>    a: <span class="hljs-number">1</span>,<br>    b: <span class="hljs-number">2</span><br>  &#125;,<br>  <span class="hljs-comment">// 头信息</span><br>  headers: &#123;<br>    MyHeaders: <span class="hljs-number">123</span><br>  &#125;,<br>  <span class="hljs-comment">// 请求体参数</span><br>  data: &#123;<br>    username: <span class="hljs-string">&#x27;admin&#x27;</span>,<br>    password: <span class="hljs-string">&#x27;123456&#x27;</span><br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><h1 id="15-fetch方法发送ajax请求"><a class="markdownIt-Anchor" href="#15-fetch方法发送ajax请求"></a> 15 fetch方法发送AJAX请求</h1><p><code>fetch</code>方法全局自带，并且返回一个Promise对象。</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">fetch(<span class="hljs-string">&#x27;http://127.0.0.1:3000/msg&#x27;</span>, &#123;<br>  <span class="hljs-comment">// 请求方法</span><br>  method: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>  <span class="hljs-comment">// 请求头</span><br>  headers: &#123;<br>    MyHeaders: <span class="hljs-number">123</span><br>  &#125;,<br>  <span class="hljs-comment">// 请求体</span><br>  body: <span class="hljs-string">&#x27;username=admin&amp;password=123456&#x27;</span><br>&#125;).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 调用fetch中的text方法，再返回一个Promise对象</span><br>  <span class="hljs-keyword">return</span> response.text()<br>  <span class="hljs-comment">// 如果服务器返回的是json数据，可以使用json方法</span><br>  <span class="hljs-comment">// return response.json()</span><br>&#125;).then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 获取到最终的响应数据</span><br>  <span class="hljs-built_in">console</span>.log(response)<br>&#125;)<br></code></pre></div></td></tr></table></figure></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2022/03/15/%E6%B5%AE%E5%8A%A8%E5%92%8C%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">浮动和清除浮动</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2021/08/20/Promise%E8%87%AA%E5%AE%9A%E4%B9%89/"><span class="hidden-mobile">Promise自定义</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>$("#local-search-input").on("click",(function(){searchFunc("/local-search.xml","local-search-input","local-search-result")})),$("#modalSearch").on("shown.bs.modal",(function(){$("#local-search-input").focus()}))</script><script src="/js/boot.js"></script></body></html>