<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;light&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><link rel="icon" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="syz"><meta name="keywords" content=""><title>ExpressåŸºç¡€ - syzdev</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"yoursite.com",root:"/",version:"1.8.10",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:1},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:35vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>ğŸ˜„ syzdev</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> é¦–é¡µ</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> å½’æ¡£</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> åˆ†ç±»</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> å…³äº</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://cdn.u1.huluxia.com/g3/M02/4D/6C/wKgBOV6fEU2AXFGSAAJ7A1Fp7rw147.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="ExpressåŸºç¡€"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-08-08 17:21" pubdate>2021å¹´8æœˆ8æ—¥ ä¸‹åˆ</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.7k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 35 åˆ†é’Ÿ</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">ExpressåŸºç¡€</h1><div class="markdown-body"><h1 id="1-ç®€ä»‹"><a class="markdownIt-Anchor" href="#1-ç®€ä»‹"></a> 1 ç®€ä»‹</h1><p>Expressæ˜¯ä¸€ä¸ªåŸºäºNodeå¹³å°çš„webåº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„å¼ºå¤§ç‰¹æ€§ç”¨æ¥åˆ›å»ºå„ç§Webåº”ç”¨ã€‚</p><ul><li>æä¾›äº†æ–¹ä¾¿ç®€æ´çš„è·¯ç”±å®šä¹‰æ–¹å¼ï¼›</li><li>å¯¹è·å–HTTPè¯·æ±‚å‚æ•°è¿›è¡Œäº†ç®€åŒ–å¤„ç†ï¼›</li><li>å¯¹æ¨¡æ¿å¼•æ“æ”¯æŒç¨‹åº¦é«˜ï¼Œæ–¹ä¾¿æ¸²æŸ“åŠ¨æ€HTMLé¡µé¢ï¼›</li><li>æä¾›äº†ä¸­é—´ä»¶æœºåˆ¶æœ‰æ•ˆæ§åˆ¶HTTPè¯·æ±‚ï¼›</li><li>æ‹¥æœ‰å¤§é‡ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶å¯¹åŠŸèƒ½è¿›è¡Œæ‰©å±•ã€‚</li></ul><p>å¯ä»¥ä½¿ç”¨ <code>npm install express</code>Â å‘½ä»¤å®‰è£…Expressï¼Œå®‰è£…ååŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š</p><ul><li><code>node_modules</code>ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–åŒ…ï¼›</li><li><code>package-lock.json</code>ï¼šæ‰€æœ‰ä¾èµ–åŒ…çš„æ¸…å•ã€‚</li></ul><p>å†åœ¨æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶<code>server.js</code>ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è§ç¬¬3èŠ‚ã€‚</p><h1 id="2-åŸç”Ÿnodejsä¸expressæ¡†æ¶è·¯ç”±å®ç°å¯¹æ¯”"><a class="markdownIt-Anchor" href="#2-åŸç”Ÿnodejsä¸expressæ¡†æ¶è·¯ç”±å®ç°å¯¹æ¯”"></a> 2 åŸç”ŸNode.jsä¸Expressæ¡†æ¶è·¯ç”±å®ç°å¯¹æ¯”</h1><h2 id="21-åŸç”Ÿnodejsè·¯ç”±"><a class="markdownIt-Anchor" href="#21-åŸç”Ÿnodejsè·¯ç”±"></a> 2.1 åŸç”ŸNode.jsè·¯ç”±</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.on(<span class="hljs-string">&#x27;request&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯çš„è¯·æ±‚è·¯å¾„</span><br>  <span class="hljs-keyword">let</span> &#123;pathname&#125; = url.parse(req.url)<br>  <span class="hljs-comment">// å¯¹è¯·æ±‚è·¯å¾„è¿›è¡Œåˆ¤æ–­ï¼Œä¸åŒçš„è·¯å¾„åœ°å€å“åº”ä¸åŒçš„å†…å®¹</span><br>  <span class="hljs-keyword">if</span> (pathname == <span class="hljs-string">&#x27;/&#x27;</span> || pathname == <span class="hljs-string">&#x27;index&#x27;</span>) &#123;<br>    res.end(<span class="hljs-string">&#x27;æ¬¢è¿æ¥åˆ°é¦–é¡µï¼&#x27;</span>)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pathname == <span class="hljs-string">&#x27;/other&#x27;</span>) &#123;<br>    res.end(<span class="hljs-string">&#x27;æ¬¢è¿æ¥åˆ°å…¶ä»–é¡µé¢ï¼&#x27;</span>)<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pathname == <span class="hljs-string">&#x27;/about&#x27;</span>) &#123;<br>    res.end(<span class="hljs-string">&#x27;æ¬¢è¿æ¥åˆ°å…³äºé¡µé¢ï¼&#x27;</span>) <br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    res.end(<span class="hljs-string">&#x27;æŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç›¸å…³é¡µé¢ï¼&#x27;</span>)<br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="22-expressè·¯ç”±"><a class="markdownIt-Anchor" href="#22-expressè·¯ç”±"></a> 2.2 Expressè·¯ç”±</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å½“å®¢æˆ·ç«¯ä»¥getæ–¹å¼è®¿é—®/æ—¶</span><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// å¯¹å®¢æˆ·ç«¯åšå‡ºå“åº”</span><br>  res.send(<span class="hljs-string">&#x27;ä½¿ç”¨getæ–¹å¼è¯·æ±‚äº†/è·¯ç”±&#x27;</span>)<br>&#125;)<br><br><span class="hljs-comment">// å½“å®¢æˆ·ç«¯ä»¥postæ–¹å¼è®¿é—®/aboutè·¯ç”±æ—¶</span><br>app.post(<span class="hljs-string">&#x27;/about&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;ä½¿ç”¨postæ–¹å¼è¯·æ±‚äº†/aboutè·¯ç”±&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h1 id="3-expressæ¡†æ¶ç®€å•ä½¿ç”¨"><a class="markdownIt-Anchor" href="#3-expressæ¡†æ¶ç®€å•ä½¿ç”¨"></a> 3 Expressæ¡†æ¶ç®€å•ä½¿ç”¨</h1><p>å¯åŠ¨ä¸€ä¸ªExpressç½‘ç«™æœåŠ¡å™¨å¹¶å¼€å¯ä¸€ä¸ªâ€œ/â€çš„è·¯ç”±ç›‘å¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 1.å¼•å…¥Expressæ¡†æ¶ï¼Œå¹¶åˆ›å»ºExpresså®ä¾‹</span><br><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)<br><span class="hljs-comment">// 2.åˆ›å»ºç½‘ç«™æœåŠ¡å™¨å¯¹è±¡</span><br><span class="hljs-keyword">const</span> app = express()<br><br><span class="hljs-comment">// 3.å®šä¹‰è·¯ç”±</span><br><span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„è·¯å¾„ï¼Œ&#x27;/&#x27;ä»£è¡¨æ ¹è·¯å¾„localhost:3000</span><br><span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œreqæ˜¯requestçš„ç¼©å†™ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æäº¤è¿‡æ¥çš„æ•°æ®</span><br><span class="hljs-comment">// resæ˜¯respondçš„ç¼©å†™ï¼Œè¡¨ç¤ºè¦å“åº”å›çš„æ•°æ®</span><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// send()æ–¹æ³•ï¼Œå“åº”ç»™å®¢æˆ·ç«¯ä¿¡æ¯</span><br>  <span class="hljs-comment">// 1. sendæ–¹æ³•å†…éƒ¨ä¼šæ£€æµ‹å“åº”å†…å®¹çš„ç±»å‹</span><br>  <span class="hljs-comment">// 2. sendæ–¹æ³•ä¼šè‡ªåŠ¨è®¾ç½®httpçŠ¶æ€ç </span><br>  <span class="hljs-comment">// 3. sendæ–¹æ³•ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è®¾ç½®å“åº”çš„å†…å®¹ç±»å‹åŠç¼–ç </span><br>  res.send(<span class="hljs-string">&#x27;Hello Express!&#x27;</span>)<br>&#125;)<br><br><span class="hljs-comment">// 4.ç›‘å¬ç«¯å£ï¼Œç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°å¯åŠ¨æˆåŠŸåæ‰§è¡Œçš„å†…å®¹</span><br>app.listen(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ç½‘ç«™æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>è¾“å…¥<code>node server.js</code>å¯åŠ¨æœåŠ¡å™¨ï¼Œä½†å› nodeé¡¹ç›®åœ¨æ¯æ¬¡ç¼–è¾‘åéƒ½è¦é‡æ–°å¯åŠ¨æ‰ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥ä½¿ç”¨<code>nodemon</code>å·¥å…·æ¥è‡ªåŠ¨å¯åŠ¨æœåŠ¡ï¼Œæ¨èå…¨å±€å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">npm install -g nodemon<br></code></pre></div></td></tr></table></figure><p>å®‰è£…æˆåŠŸåå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>nodemon server.js</code>æ¥å¯åŠ¨æœåŠ¡ã€‚</p><h1 id="4-ä¸­é—´ä»¶"><a class="markdownIt-Anchor" href="#4-ä¸­é—´ä»¶"></a> 4 ä¸­é—´ä»¶</h1><p>ä¸­é—´ä»¶å°±æ˜¯ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ã€å¯ä»¥å¯¹è¯·æ±‚åšå‡ºå“åº”ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚ç»§ç»­äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ç»§ç»­å¤„ç†ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2021/png/1602549/1611556383029-e0421db1-1b3f-48a7-ac86-d1ac8c967ca7.png" srcset="/img/loading.gif" lazyload><br>ä¸­é—´ä»¶ä¸»è¦ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼Œä¸­é—´ä»¶æ–¹æ³•ä»¥åŠè¯·æ±‚å¤„ç†å‡½æ•°ã€‚<br>ä¸­é—´ä»¶æ–¹æ³•ç”±Expressæä¾›ï¼Œè´Ÿè´£æ‹¦æˆªè¯·æ±‚ï¼Œè¯·æ±‚å¤„ç†å‡½æ•°ç”±å¼€å‘äººå‘˜æä¾›ï¼Œè´Ÿè´£å¤„ç†è¯·æ±‚ã€‚<br>å¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè¯·æ±‚è®¾ç½®å¤šä¸ªä¸­é—´ä»¶ï¼Œå¯¹åŒä¸€ä¸ªè¯·æ±‚è¿›è¡Œå¤šæ¬¡å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.get(<span class="hljs-string">&#x27;/request&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  req.name = <span class="hljs-string">&#x27;Jack&#x27;</span><br>  next()<br>&#125;)<br>app.get(<span class="hljs-string">&#x27;/request&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(req.name)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ä¸­é—´ä»¶ï¼Œä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œç»ˆæ­¢åŒ¹é…ã€‚å¯ä»¥è°ƒç”¨ <code>next()</code>Â æ–¹æ³•å°†è¯·æ±‚çš„æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œç›´åˆ°é‡åˆ°ç»“æŸè¯·æ±‚çš„ä¸­é—´ä»¶ã€‚</p><h2 id="41-ä¸‡èƒ½ä¸­é—´ä»¶-appuse"><a class="markdownIt-Anchor" href="#41-ä¸‡èƒ½ä¸­é—´ä»¶-appuse"></a> 4.1 ä¸‡èƒ½ä¸­é—´ä»¶ <code>app.use</code></h2><p><code>app.use</code> åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥ä¼ å…¥è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œä»£è¡¨æ¥æ”¶æ‰€æœ‰çš„è¯·æ±‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(req.url)<br>  next()<br>&#125;)<br></code></pre></div></td></tr></table></figure><p><code>app.use</code>Â ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥ä¼ å…¥è¯·æ±‚åœ°å€ï¼Œä»£è¡¨ä¸è®ºä»€ä¹ˆè¯·æ±‚æ–¹å¼ï¼Œåªè¦æ˜¯è¿™ä¸ªè¯·æ±‚åœ°å€å°±æ¥æ”¶è¿™ä¸ªè¯·æ±‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.use(<span class="hljs-string">&#x27;/about&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(req.url)<br>  next()<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="42-ä¸­é—´ä»¶çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#42-ä¸­é—´ä»¶çš„åº”ç”¨"></a> 4.2 ä¸­é—´ä»¶çš„åº”ç”¨</h2><ol><li>è·¯ç”±ä¿æŠ¤ï¼Œå®¢æˆ·ç«¯åœ¨è®¿é—®éœ€è¦ç™»å½•çš„é¡µé¢æ—¶ï¼Œå¯ä»¥å…ˆä½¿ç”¨ä¸­é—´ä»¶åˆ¤æ–­ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œç”¨æˆ·å¦‚æœæœªç™»å½•ï¼Œåˆ™æ‹¦æˆªè¯·æ±‚ï¼Œç›´æ¥å“åº”ï¼Œç¦æ­¢ç”¨æˆ·è¿›å…¥éœ€è¦ç™»å½•çš„é¡µé¢ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ç™»å½•è¿‡ç¨‹æ¨¡æ‹Ÿ</span><br>app.get(<span class="hljs-string">&#x27;/admin&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// ç”¨æˆ·æ²¡æœ‰ç™»å½•</span><br>  <span class="hljs-keyword">let</span> isLogin = <span class="hljs-literal">false</span><br>  <span class="hljs-keyword">if</span> (isLogin) &#123;<br>    <span class="hljs-comment">// å¦‚æœç”¨æˆ·ç™»å½•ï¼Œè®©è¯·æ±‚ç»§ç»­å‘ä¸‹æ‰§è¡Œ</span><br>    next()<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    res.send(<span class="hljs-string">&#x27;æ‚¨è¿˜æ²¡æœ‰ç™»å½•ï¼Œä¸èƒ½è®¿é—®å½“å‰é¡µé¢ï¼&#x27;</span>)<br>  &#125;<br>&#125;)<br><br>app.use(<span class="hljs-string">&#x27;/admin&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;æ‚¨å·²ç»ç™»å½•ï¼Œå¯ä»¥è®¿é—®å½“å‰é¡µé¢ï¼&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><ol start="2"><li>ç½‘ç«™ç»´æŠ¤å…¬å‘Šï¼Œåœ¨æ‰€æœ‰è·¯ç”±çš„æœ€ä¸Šé¢å®šä¹‰æ¥æ”¶æ‰€æœ‰è¯·æ±‚çš„ä¸­é—´ä»¶ï¼Œç›´æ¥ä¸ºå®¢æˆ·ç«¯åšå‡ºå“åº”ï¼Œç½‘ç«™æ­£åœ¨ç»´æŠ¤ä¸­ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  res.send(<span class="hljs-string">&#x27;å½“å‰ç½‘ç«™æ­£åœ¨ç»´æŠ¤ã€‚ã€‚ã€‚&#x27;</span>)<br>  <span class="hljs-comment">// ç”±äºæ²¡æœ‰ä½¿ç”¨next()ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæ‰€ä»¥ä¼šåœç•™åœ¨æ­¤å¤„</span><br>&#125;)<br></code></pre></div></td></tr></table></figure><ol start="3"><li>è‡ªå®šä¹‰404é¡µé¢ï¼ŒæŠŠä¸­é—´ä»¶å®šä¹‰åœ¨æœ€åé¢ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// ä¸ºå®¢æˆ·ç«¯å“åº”404çŠ¶æ€ç ä»¥åŠæç¤ºä¿¡æ¯</span><br>  res.status(<span class="hljs-number">404</span>).send(<span class="hljs-string">&#x27;å½“å‰è®¿é—®çš„é¡µé¢æ˜¯ä¸å­˜åœ¨çš„ã€‚&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="43-å¤„ç†é”™è¯¯ä¸­é—´ä»¶"><a class="markdownIt-Anchor" href="#43-å¤„ç†é”™è¯¯ä¸­é—´ä»¶"></a> 4.3 å¤„ç†é”™è¯¯ä¸­é—´ä»¶</h2><p>åœ¨ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°ä¸€äº›æ— æ³•é¢„æ–™çš„é”™è¯¯ï¼Œæ¯”å¦‚æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œæ•°æ®åº“è¿æ¥å¤±è´¥ã€‚é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªé›†ä¸­å¤„ç†é”™è¯¯çš„åœ°æ–¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.get(<span class="hljs-string">&#x27;/index&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªé”™è¯¯å®ä¾‹å¹¶æŠ›å‡º</span><br>  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;ç¨‹åºå‘ç”Ÿäº†æœªçŸ¥é”™è¯¯ï¼&#x27;</span>)<br>&#125;)<br><br>app.use(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// ä¸ºå®¢æˆ·ç«¯å“åº”500çŠ¶æ€ç ä»¥åŠæç¤ºä¿¡æ¯</span><br>  res.status(<span class="hljs-number">500</span>).send(err.message)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p><code>throw new Error('ç¨‹åºå‘ç”Ÿäº†æœªçŸ¥é”™è¯¯ï¼')</code>Â å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒæ­¥ä»£ç ï¼Œå¦‚æœå¼‚æ­¥ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œè¿™æ ·æ˜¯æ— æ³•æ•æ‰åˆ°çš„ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦æ‰‹åŠ¨çš„è§¦å‘é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼Œå½“å¼‚æ­¥APIå‡ºé”™æ—¶ï¼Œéœ€è¦è°ƒç”¨ <code>next()</code>Â æ–¹æ³•ï¼Œå¹¶æŠŠé”™è¯¯ä¼ å…¥ <code>next()</code>Â æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  fs.readFile(<span class="hljs-string">&#x27;/file-does-not-exist&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) &#123;<br>      next(err)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      res.send(result)<br>    &#125;<br>  &#125;)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="44-æ•è·é”™è¯¯"><a class="markdownIt-Anchor" href="#44-æ•è·é”™è¯¯"></a> 4.4 æ•è·é”™è¯¯</h2><p>åœ¨nodejsä¸­ï¼Œå¼‚æ­¥APIçš„é”™è¯¯ä¿¡æ¯éƒ½æ˜¯é€šè¿‡å›è°ƒå‡½æ•°è·å–çš„ï¼Œæ”¯æŒPromiseå¯¹è±¡çš„å¼‚æ­¥APIå‘ç”Ÿé”™è¯¯å¯ä»¥é€šè¿‡catchæ–¹æ³•æ•è·ã€‚å¼‚æ­¥å‡½æ•°æ‰§è¡Œå¦‚æœå‘ç”Ÿé”™è¯¯è¦å¦‚ä½•æ•è·é”™è¯¯å‘¢ï¼Ÿ</p><p><code>try catch</code>Â å¯ä»¥æ•è·å¼‚æ­¥å‡½æ•°ä»¥åŠå…¶ä»–åŒæ­¥ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯ï¼Œä½†æ˜¯ä¸èƒ½å…¶ä»–ç±»å‹çš„APIå‘ç”Ÿçš„é”™è¯¯ã€‚ä¸‹é¢ä»£ç ä¸­æŠŠè¯»å–æ–‡ä»¶æ”¹é€ æˆæ”¯æŒå¼‚æ­¥å‡½æ•°çš„å½¢å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promisify = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;util&#x27;</span>).promisify<br><span class="hljs-keyword">const</span> readFile = promisify(fs.readFile)<br><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-keyword">async</span> (req, res, next) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">await</span> readFile(<span class="hljs-string">&#x27;/aaa.js&#x27;</span>)<br>  &#125; <span class="hljs-keyword">catch</span>(err) &#123;<br>    next(err)<br>  &#125;<br>&#125;)<br></code></pre></div></td></tr></table></figure><h2 id="45-æ„å»ºæ¨¡å—åŒ–è·¯ç”±"><a class="markdownIt-Anchor" href="#45-æ„å»ºæ¨¡å—åŒ–è·¯ç”±"></a> 4.5 æ„å»ºæ¨¡å—åŒ–è·¯ç”±</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// åˆ›å»ºè·¯ç”±å¯¹è±¡</span><br><span class="hljs-keyword">const</span> home = express.Router()<br><span class="hljs-comment">// å°†è·¯ç”±å’Œè¯·æ±‚è·¯å¾„è¿›è¡ŒåŒ¹é…</span><br>app.use(<span class="hljs-string">&#x27;/home&#x27;</span>, home)<br><span class="hljs-comment">// åœ¨homeè·¯ç”±ä¸‹ç»§ç»­åˆ›å»ºäºŒçº§è·¯ç”±</span><br>home.get(<span class="hljs-string">&#x27;/index&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// è®¿é—®è·¯å¾„/home/index</span><br>  res.send(<span class="hljs-string">&#x27;æ¬¢è¿æ¥åˆ°ä¸»é¡µï¼&#x27;</span>)<br>&#125;)<br></code></pre></div></td></tr></table></figure><img src="https://cdn.nlark.com/yuque/0/2021/png/1602549/1611580982180-4318d766-5a38-4e41-bf8d-f0c3a3589936.png" srcset="/img/loading.gif" lazyload><h1 id="5-getå‚æ•°çš„è·å–"><a class="markdownIt-Anchor" href="#5-getå‚æ•°çš„è·å–"></a> 5 GETå‚æ•°çš„è·å–</h1><p>Expressæ¡†æ¶ä¸­ä½¿ç”¨req.queryå³å¯è·å–GETå‚æ•°ï¼Œæ¡†æ¶å†…éƒ¨ä¼šå°†GETå‚æ•°è½¬æ¢ä¸ºå¯¹è±¡å¹¶è¿”å›ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// æ¥æ”¶åœ°å€æ ä¸­é—®å·åé¢çš„å‚æ•°</span><br><span class="hljs-comment">// ä¾‹å¦‚ï¼šhttp://localhost:3000/?name=zhangsan&amp;age=30</span><br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(req.query) <br>  <span class="hljs-comment">// &#123;&quot;name&quot;: &quot;zhangsan&quot;, &quot;age&quot;: &quot;30&quot;&#125;</span><br>&#125;)<br></code></pre></div></td></tr></table></figure><h1 id="6-postå‚æ•°çš„è·å–"><a class="markdownIt-Anchor" href="#6-postå‚æ•°çš„è·å–"></a> 6 POSTå‚æ•°çš„è·å–</h1><p>Expressä¸­æ¥æ”¶postè¯·æ±‚å‚æ•°éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åŒ… body-parserã€‚å®ƒå…¶å®æ˜¯Expresså®˜æ–¹æä¾›çš„ï¼Œå®˜æ–¹ä¸ºäº†è®©åŒ…ä½“ç§¯æ›´åŠ å°å·§ï¼Œå°†ä¸€äº›å·¥å…·å‰¥ç¦»å‡ºæ¥ï¼Œä¾›å¼€å‘è€…æŒ‰éœ€å®‰è£…ã€‚<br>å®‰è£…å‘½ä»¤ï¼š <code>npm install body-parser</code>Â ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼•å…¥body-parseræ¨¡å—</span><br><span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;body-parser&#x27;</span>)<br><span class="hljs-comment">// é…ç½®body-parseræ¨¡å—ï¼Œæ‹¦æˆªæ‰€æœ‰è¯·æ±‚</span><br><span class="hljs-comment">// extended: false æ–¹æ³•å†…éƒ¨ä½¿ç”¨querystringæ¨¡å—å¤„ç†è¯·æ±‚å‚æ•°çš„æ ¼å¼</span><br><span class="hljs-comment">// extended: true æ–¹æ³•å†…éƒ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—qså¤„ç†è¯·æ±‚å‚æ•°çš„æ ¼å¼</span><br>app.use(bodyParser.urlencoded(&#123;<span class="hljs-attr">extended</span>: <span class="hljs-literal">false</span>&#125;))<br><span class="hljs-comment">// æ¥æ”¶è¯·æ±‚</span><br>app.post(<span class="hljs-string">&#x27;/add&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// æ¥æ”¶è¯·æ±‚å‚æ•°</span><br>  <span class="hljs-built_in">console</span>.log(req.body)<br>&#125;)<br></code></pre></div></td></tr></table></figure><blockquote><p>æ³¨ï¼šå¯ä»¥ç›´æ¥ä½¿ç”¨<code>app.use(express.json());</code>ä»£æ›¿body-parserã€‚<br>ã€1ã€‘<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61551926/express-json-vs-body-parser">https://stackoverflow.com/questions/61551926/express-json-vs-body-parser</a><br>ã€2ã€‘<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/ask/37434">https://cloud.tencent.com/developer/ask/37434</a></p></blockquote><h1 id="7-expressè·¯ç”±å‚æ•°"><a class="markdownIt-Anchor" href="#7-expressè·¯ç”±å‚æ•°"></a> 7 Expressè·¯ç”±å‚æ•°</h1><p>åœ¨å®šä¹‰æ—¶ï¼Œå¯ä»¥æ˜¾å¼å®šä¹‰è¯·æ±‚æ¥æ”¶çš„å‚æ•°ï¼Œåœ¨urlåé¢ç”¨å†’å·åŠ ä¸Šå‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// localhost:3000/find/123</span><br>app.get(<span class="hljs-string">&#x27;/find/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(req.params) <span class="hljs-comment">// &#123;id: 123&#125;</span><br>&#125;)<br></code></pre></div></td></tr></table></figure><p>å¦‚æœè¦ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ç»§ç»­æ·»åŠ æ–œæ å’Œå†’å·ã€‚</p><h1 id="8-é™æ€èµ„æºçš„å¤„ç†"><a class="markdownIt-Anchor" href="#8-é™æ€èµ„æºçš„å¤„ç†"></a> 8 é™æ€èµ„æºçš„å¤„ç†</h1><p>é€šè¿‡Expresså†…ç½®çš„<code>express.static</code>å¯ä»¥æ–¹ä¾¿åœ°æ‰˜ç®¡é™æ€æ–‡ä»¶ï¼Œä¾‹å¦‚imgã€CSSã€JavaScript æ–‡ä»¶ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<br>app.use(express.static(path.join(__dirname, <span class="hljs-string">&#x27;public&#x27;</span>)))<br></code></pre></div></td></tr></table></figure><p>ç°åœ¨ï¼Œpublicç›®å½•ä¸‹é¢çš„æ–‡ä»¶å°±å¯ä»¥è®¿é—®äº†ã€‚</p><ul><li><a target="_blank" rel="noopener" href="http://localhost:3000/images/kitten.jpghttp://localhost:3000/css/style.css">http://localhost:3000/images/kitten.jpg</a></li><li><a target="_blank" rel="noopener" href="http://localhost:3000/images/kitten.jpghttp://localhost:3000/css/style.css">http://localhost:3000/css/style.css</a></li><li><a target="_blank" rel="noopener" href="http://localhost:3000/js/app.js">http://localhost:3000/js/app.js</a></li><li><a target="_blank" rel="noopener" href="http://localhost:3000/images/bg.pnghttp://localhost:3000/hello.html">http://localhost:3000/images/bg.png</a></li><li><a target="_blank" rel="noopener" href="http://localhost:3000/images/bg.pnghttp://localhost:3000/hello.html">http://localhost:3000/hello.html</a></li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ§åˆ¶è·¯å¾„ï¼Œå¯ä»¥åœ¨æ·»åŠ ä¸€ä¸ªå‚æ•°<code>static</code>ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.use(<span class="hljs-string">&#x27;static&#x27;</span>, express.static(path.join(__dirname, <span class="hljs-string">&#x27;public&#x27;</span>)))<br></code></pre></div></td></tr></table></figure><p>å†è®¿é—®é™æ€èµ„æºçš„æ—¶å€™å°±è¦åœ¨urlä¸­åŠ å…¥<code>static</code>ï¼Œå¦‚ï¼š<a target="_blank" rel="noopener" href="http://localhost:3000/images/bg.pnghttp://localhost:3000/hello.html">http://localhost:3000/static/hello.html</a>ã€‚</p><h1 id="9-è·¨åŸŸå¤„ç†"><a class="markdownIt-Anchor" href="#9-è·¨åŸŸå¤„ç†"></a> 9 è·¨åŸŸå¤„ç†</h1><p>å‚è€ƒèµ„æ–™ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904126246027278#heading-1">https://juejin.cn/post/6844904126246027278#heading-1</a><br>ç°åœ¨å¦‚æœ‰æ¥å£ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">app.get(<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.send(&#123;<br>    name: <span class="hljs-string">&#x27;syz&#x27;</span>,<br>    age: <span class="hljs-string">&#x27;18&#x27;</span>,<br>  &#125;)<br>&#125;)<br></code></pre></div></td></tr></table></figure><p>è¯¥æ¥å£çš„è®¿é—®åœ°å€æ˜¯ï¼š<a target="_blank" rel="noopener" href="http://localhost:3000/user">http://localhost:3000/user</a>ã€‚ä½¿ç”¨é™æ€èµ„æºå¤„ç†ï¼Œåœ¨publicæ–‡ä»¶å¤¹ä¸­æ–°å»º<code>index.html</code>ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2021/png/1602549/1614411146963-1144a4b8-46db-4d6f-9338-bf2611b5631f.png" srcset="/img/loading.gif" lazyload><br>æ­¤æ—¶é€šè¿‡<a target="_blank" rel="noopener" href="http://localhost:3000/index.html">http://localhost:3000/index.html</a>å¯ä»¥è®¿é—®ï¼Œåœ¨<code>body</code>ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">&lt;script&gt;<br>  fetch(<span class="hljs-string">&#x27;http://localhost:3000/user&#x27;</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(data)<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></div></td></tr></table></figure><p>å†æ¬¡è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:3000/index.html">http://localhost:3000/index.html</a>ï¼Œå°±å¯ä»¥åœ¨Consoleä¸­çœ‹åˆ°è¾“å‡ºçš„å¯¹è±¡ï¼š<code>&#123;name: &quot;syz&quot;, age: &quot;18&quot;&#125;</code>ã€‚<br>è¿™æ˜¯æ•°æ®æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®åˆ°çš„ï¼Œæ­¤æ—¶å³é”®<code>index.html</code>ï¼Œåˆ©ç”¨vscodeæ’ä»¶Live serveræ‰“å¡ï¼Œè¯¥æ’ä»¶ä¼šå¯åŠ¨ä¸€ä¸ªä»¥5500ä¸ºç«¯å£çš„æœåŠ¡ï¼š<br><img src="https://cdn.nlark.com/yuque/0/2021/png/1602549/1614411082845-8bcd5311-8795-4553-94c1-cf21543a0429.png" srcset="/img/loading.gif" lazyload><br>è®¿é—®åœ°å€ä¸ºï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:5500/public/index.html">http://127.0.0.1:5500/public/index.html</a>ï¼Œæ­¤æ—¶å¯ä»¥å‘ç°Consoleæ— æ³•è¯·æ±‚åˆ°æ•°æ®äº†ï¼Œå¹¶æŠ¥äº†è·¨åŸŸé”™è¯¯ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2021/png/1602549/1614411173204-1edb2b1f-6740-4753-a7ea-3516ed997c1f.png" srcset="/img/loading.gif" lazyload><br>å¤„ç†è·¨åŸŸé—®é¢˜éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼š<code>npm i cors</code>ï¼Œåœ¨<code>server.js</code>ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼•å…¥corsï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç›´æ¥()æ‰§è¡Œï¼Œæ‰§è¡Œåæ˜¯ä¸€ä¸ªExpressä¸­é—´ä»¶ï¼Œapp.useä½¿ç”¨å®ƒå³å¯</span><br>app.use(<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cors&#x27;</span>)())<br></code></pre></div></td></tr></table></figure><p>å†è®¿é—®<a target="_blank" rel="noopener" href="http://127.0.0.1:5500/public/index.html">http://127.0.0.1:5500/public/index.html</a>å³å¯è·å–åˆ°æ•°æ®ã€‚</p></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></div></div><p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p><div class="post-prevnext"><article class="post-prev col-6"></article><article class="post-next col-6"><a href="/2020/05/01/HTTPS%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84/"><span class="hidden-mobile">HTTPSæ˜¯å¦‚ä½•å·¥ä½œçš„</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>$("#local-search-input").on("click",(function(){searchFunc("/local-search.xml","local-search-input","local-search-result")})),$("#modalSearch").on("shown.bs.modal",(function(){$("#local-search-input").focus()}))</script><script src="/js/boot.js"></script></body></html>