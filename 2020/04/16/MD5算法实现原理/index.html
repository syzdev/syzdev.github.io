<!DOCTYPE html><html lang="zh-CN" color-mode="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content=""><meta name="author" content="syz"><meta name="description" content=""><title>MD5算法实现原理 | syzdev</title><link rel="apple-touch-icon" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><link rel="icon" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/color-scheme.css"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css"><link rel="stylesheet" href="/css/github-markdown.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="/css/comments.css"><link rel="stylesheet" href="/css/figcaption/mac-block.css"><script defer type="text/javascript" src="/plugins/jquery.min.js"></script><link href="/plugins/jquery.fancybox.min.css" rel="stylesheet"><script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script><script src="/js/fancybox.js"></script><script>var html=document.documentElement;const colorMode=localStorage.getItem("color-mode");colorMode&&document.documentElement.setAttribute("color-mode",colorMode)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="app"><div class="header"><div class="avatar"><a href="/"><img src="/images/avatar.png" alt=""></a><div class="nickname"><a href="/">syzdev</a></div></div><div class="navbar"><ul><li class="nav-item" data-path="/"><a href="/">首页</a></li><li class="nav-item" data-path="/archives/"><a href="/archives/">归档</a></li><li class="nav-item" data-path="/tags/"><a href="/tags/">标签</a></li><li class="nav-item" data-path="/about/"><a href="/about/">关于</a></li></ul></div></div><script src="/js/activeNav.js"></script><div class="flex-container"><script async type="text/javascript" src="/plugins/clipboard.min.js"></script><script src="/js/codeCopy.js"></script><div class="container post-details" id="post-details"><div class="post-content"><div class="post-title">MD5算法实现原理</div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime" title="更新时间"></i> 2020-04-16 21:14:07 </span><span class="post-tags"><i class="iconfont icon-tags" title="标签"></i> <span class="span--tag"><a href="/tags/%E5%85%B6%E4%BB%96/" title="其他"><b>#</b> 其他</a></span></span></div><div class="markdown-body"><h1 id="1-md5-简介"><a class="markdownIt-Anchor" href="#1-md5-简介"></a> 1 MD5 简介</h1><p>信息摘要算法 MD5 (Message Digest 5)，数字 5 代表这是第五代算法，之前还有 MD1、MD2、MD3 和 MD4。MD5 是一种被广泛使用的密码散列函数，可以产生出一个 128 位（ 16 字节）的散列值（hash value），用于确保信息传输完整一致。</p><p>MD5 算法的特征是不可逆性，并且在计算的时候所有的数据都参与了运算，其中任何一个数据变化了都会导致计算出来的 Hash 值完全不同，所以通常用来校验数据是否正确或用作身份验证。</p><h1 id="2-md5-实现步骤"><a class="markdownIt-Anchor" href="#2-md5-实现步骤"></a> 2 MD5 实现步骤</h1><h2 id="21-将明文变为-ascii-码"><a class="markdownIt-Anchor" href="#21-将明文变为-ascii-码"></a> 2.1 将明文变为 ASCII 码</h2><p>要加密的明文：<code>China,my great country</code>。<br>ASCII码：<code>43 68 69 6E 61 2C 6D 79 20 67 72 65 61 74 20 63 6F 75 6E 74 72 79</code></p><h2 id="22-填充和附加"><a class="markdownIt-Anchor" href="#22-填充和附加"></a> 2.2 填充和附加</h2><p>对数据进行<strong>填充</strong>的目的是使任意长度的数据能够被 512 整除，填充的首位是 1 ，其余位全部为 0 ，填充后数据变成 (N*512-64) 位（下图中假设 N = 1 ，则填充后要达到 448 位）。</p><p>减去 64 是因为要在数据末尾<strong>附加</strong>长度项，如果数据的长度大于 64 位，则只取低 64 位。通过填充和附加后，整个数据变为 512 的整数倍。<br><img src="https://img-blog.csdnimg.cn/20200416164628242.jpg" alt="在这里插入图片描述" style="zoom:67%"><br>下面对数据进行填充和附加操作，数据为<code>4368696E612C6D7920677265617420636F756E747279</code>，这段数据长度为 176 位（注意上述数据是用 16 进制表示的），由于 176 &lt; 448 ，所以需要进行填充，共需填充 448-176=272 位，用 16 进制表示为 <code>80000....0000</code>（ 272 位），再加上数据长度项 176 的 16 进制为 <code>00B0</code>，但是要凑成 64 位，所以最后附加 <code>B000000000000000</code>。</p><p>填充和附加后的数据为：<code>4368696E612C6D7920677265617420636F756E747279</code> <code>80000....0000</code>（ 272 位）<code>B000000000000000</code>。总长度刚好为 512 位。</p><h2 id="23-分组"><a class="markdownIt-Anchor" href="#23-分组"></a> 2.3 分组</h2><p>将数据按每组 512 位进行分组，每组内再分成 16 组，每组 32 位。</p><p>上述数据按要求分组后如下表，并把每组数据保存在数组 <code>x</code> 中，表中的 <code>#</code> 代表在数组中的下标：</p><table><thead><tr><th>#</th><th>数据</th></tr></thead><tbody><tr><td>0</td><td><code>6E696843</code></td></tr><tr><td>1</td><td><code>796D2C61</code></td></tr><tr><td>2</td><td><code>65726720</code></td></tr><tr><td>3</td><td><code>63207461</code></td></tr><tr><td>4</td><td><code>746E756F</code></td></tr><tr><td>…</td><td>…</td></tr><tr><td>11</td><td><code>00000000</code></td></tr><tr><td>12</td><td><code>00000000</code></td></tr><tr><td>13</td><td><code>00000000</code></td></tr><tr><td>14</td><td><code>000000B0</code></td></tr><tr><td>15</td><td><code>00000000</code></td></tr></tbody></table><h2 id="24-预处理"><a class="markdownIt-Anchor" href="#24-预处理"></a> 2.4 预处理</h2><p>首先要确定 4 个链接变量 <code>A、B、C、D</code>，每个变量 32 位。</p><table><thead><tr><th>链接变量</th><th>存储形式值</th></tr></thead><tbody><tr><td><code>A</code></td><td><code>0x67452301</code></td></tr><tr><td><code>B</code></td><td><code>0xEFCDAB89</code></td></tr><tr><td><code>C</code></td><td><code>0x98BADCFE</code></td></tr><tr><td><code>D</code></td><td><code>0x10325476</code></td></tr></tbody></table><p>这四个变量看似毫无章法，其实是有规律的，由于 Windows 是基于 <strong>Little Endian</strong> 的，即低位字节排放在内存的低地址端，高位字节排放在内存的高地址端，所以我们在定义这四个变量的值的时候要按它们在内存中的存储形式进行定义，实际上这四个变量的逻辑形式是：</p><table><thead><tr><th>链接变量</th><th>逻辑形式值</th></tr></thead><tbody><tr><td><code>A</code></td><td><code>0x01234567</code></td></tr><tr><td><code>B</code></td><td><code>0x89ABCDEF</code></td></tr><tr><td><code>C</code></td><td><code>0xFEDCBA98</code></td></tr><tr><td><code>D</code></td><td><code>0x76543210</code></td></tr></tbody></table><p>仔细观察后，规律就很明显了。</p><h2 id="25-循环加工"><a class="markdownIt-Anchor" href="#25-循环加工"></a> 2.5 循环加工</h2><p>当第一轮的第一步开始处理时，将这 4 个变量先分别赋值到另外 4 个变量 <code>oldA、oldB、oldC、oldD</code> 中，以第一轮第一步为例，对应第一轮第一步的操作函数为 <code>md5ff(a, b, c, d, x[0], 7, 0xD76AA478)</code>（<code>7</code> 用于循环左移，<code>0xD76AA478</code> 为正弦补充值），首先将 <code>b、c、d</code> 经过非线性函数 <code>(b&amp;c) | (not(b)&amp;d)</code> 计算得到<code>98BADCFE</code>后，再将这个值加上 <code>A、x[0]</code> 和 <code>0xD76AA478</code>，即 <code>67452301 + 98BADCFE + 6E696843 + D76AA478 = 45D40CBA</code>。</p><p>再将相加结果 <code>45D40CBA</code> 循环左移七位得 <code>EA065D22</code>，再加上链接变量 <code>B</code> 的值，即 <code>EA065D22 + EFCDAB89 = D9D408AB</code>，最后把这个值赋值给链接变量 <code>A</code>。</p><p>依次类推，经过 4 轮操作，共 64 个步骤后， 4 个链接变量变为：</p><table><thead><tr><th>链接变量</th><th>存储形式值</th></tr></thead><tbody><tr><td><code>A</code></td><td><code>0xD32A3F0D</code></td></tr><tr><td><code>B</code></td><td><code>0x0E63C780</code></td></tr><tr><td><code>C</code></td><td><code>0x469E5215</code></td></tr><tr><td><code>D</code></td><td><code>0x65C53CCA</code></td></tr></tbody></table><p>接下来要将原 <code>A、B、C、D</code> 的值和上表中处理后的<code>A、B、C、D</code> 值相加求和，将和分别赋值给<code>A、B、C、D</code>，这个时候就用到了之前的 <code>oldA、oldB、oldC、oldD</code> ，具体操作以 <code>A</code> 为例，将 <code>A</code> 与 <code>oldA</code> 相加，即 <code>D32A3F0D + 67452301 = 3A6F620E</code>，再将和赋值给 <code>A</code>。全部求和后结果如下表：</p><table><thead><tr><th>链接变量</th><th>存储形式值</th></tr></thead><tbody><tr><td><code>A</code></td><td><code>0x3A6F620E</code></td></tr><tr><td><code>B</code></td><td><code>0xFE317309</code></td></tr><tr><td><code>C</code></td><td><code>0xDF592F13</code></td></tr><tr><td><code>D</code></td><td><code>0x75F79140</code></td></tr></tbody></table><p>最后算得的散列值为：<code>0E626F3A097331FE132F59DF4091F775</code>。</p><h1 id="3-blueimp-md5-源码"><a class="markdownIt-Anchor" href="#3-blueimp-md5-源码"></a> 3 blueimp-md5 源码</h1><p><a target="_blank" rel="noopener" href="https://github.com/blueimp/JavaScript-MD5">blueimp-md5</a> 是由 blueimp 实现的 JavaScript MD5 算法。阅读源码后发现他们用了很多位运算来实现整个过程，有的地方生涩难懂。源码中一共提供了 4 种 API：</p><ol><li>给定一个字符串，计算得出它的 MD5 哈希值，如：<code>var hash = md5('value')</code>；</li><li>给定一个字符串，计算得出它的 HMAC-MD5 哈希值，如：<code>var hash = md5(&quot;value&quot;, &quot;key&quot;)</code>；</li><li>给定一个字符串，计算其原始 MD5 哈希值，如：<code>var hash = md5('value', null, true)</code>；</li><li>给定一个字符串和一个键值，计算其原始 HMAC-MD5 哈希值，如：<code>var hash = md5(&quot;value&quot;, &quot;key&quot;, true)</code></li></ol><p>最常用的还是第一个，下面列出 blueimp-md5 源码实现过程，只截取了关键部分。</p><p>将字符串编码为 <code>UTF-8</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Encode a string as utf-8</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">str2rstrUTF8</span> (<span class="params">input</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(input))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将原始字符串转换为 16 进制。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Convert a raw string to a hex string</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rstr2hex</span> (<span class="params">input</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> hexTab = <span class="string">&#x27;0123456789abcdef&#x27;</span></span><br><span class="line"> <span class="keyword">var</span> output = <span class="string">&#x27;&#x27;</span></span><br><span class="line"> <span class="keyword">var</span> x</span><br><span class="line"> <span class="keyword">var</span> i</span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; input.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">  x = input.charCodeAt(i)</span><br><span class="line">  output += hexTab.charAt((x &gt;&gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0f</span>) + hexTab.charAt(x &amp; <span class="number">0x0f</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> output</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>四个非线性函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* These functions implement the four basic operations the algorithm uses.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5cmn</span> (<span class="params">q, a, b, x, s, t</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5ff</span> (<span class="params">a, b, c, d, x, s, t</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> md5cmn((b &amp; c) | (~b &amp; d), a, b, x, s, t)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5gg</span> (<span class="params">a, b, c, d, x, s, t</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> md5cmn((b &amp; d) | (c &amp; ~d), a, b, x, s, t)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5hh</span> (<span class="params">a, b, c, d, x, s, t</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> md5cmn(b ^ c ^ d, a, b, x, s, t)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5ii</span> (<span class="params">a, b, c, d, x, s, t</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> md5cmn(c ^ (b | ~d), a, b, x, s, t)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>循环左移。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Bitwise rotate a 32-bit number to the left.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bitRotateLeft</span> (<span class="params">num, cnt</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> (num &lt;&lt; cnt) | (num &gt;&gt;&gt; (<span class="number">32</span> - cnt))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>求和，生成新的链接变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Add integers, wrapping at 2^32. This uses 16-bit operations internally</span></span><br><span class="line"><span class="comment">* to work around bugs in some JS interpreters.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">safeAdd</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> lsw = (x &amp; <span class="number">0xffff</span>) + (y &amp; <span class="number">0xffff</span>)</span><br><span class="line"> <span class="keyword">var</span> msw = (x &gt;&gt; <span class="number">16</span>) + (y &gt;&gt; <span class="number">16</span>) + (lsw &gt;&gt; <span class="number">16</span>)</span><br><span class="line"> <span class="keyword">return</span> (msw &lt;&lt; <span class="number">16</span>) | (lsw &amp; <span class="number">0xffff</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>计算 MD5 哈希值，注意该函数中的 <code>a、b、c、d</code> 和 非线性函数中的数（正弦补充值）都是以十进制表示的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Calculate the MD5 of an array of little-endian words, and a bit length.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binlMD5</span> (<span class="params">x, len</span>) </span>&#123;</span><br><span class="line"> <span class="comment">/* append padding */</span></span><br><span class="line"> x[len &gt;&gt; <span class="number">5</span>] |= <span class="number">0x80</span> &lt;&lt; (len % <span class="number">32</span>)</span><br><span class="line"> x[((len + <span class="number">64</span>) &gt;&gt;&gt; <span class="number">9</span> &lt;&lt; <span class="number">4</span>) + <span class="number">14</span>] = len</span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> i</span><br><span class="line"> <span class="keyword">var</span> olda</span><br><span class="line"> <span class="keyword">var</span> oldb</span><br><span class="line"> <span class="keyword">var</span> oldc</span><br><span class="line"> <span class="keyword">var</span> oldd</span><br><span class="line"> <span class="keyword">var</span> a = <span class="number">1732584193</span></span><br><span class="line"> <span class="keyword">var</span> b = -<span class="number">271733879</span></span><br><span class="line"> <span class="keyword">var</span> c = -<span class="number">1732584194</span></span><br><span class="line"> <span class="keyword">var</span> d = <span class="number">271733878</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; x.length; i += <span class="number">16</span>) &#123;</span><br><span class="line">  olda = a</span><br><span class="line">  oldb = b</span><br><span class="line">  oldc = c</span><br><span class="line">  oldd = d</span><br><span class="line"></span><br><span class="line">  a = md5ff(a, b, c, d, x[i], <span class="number">7</span>, -<span class="number">680876936</span>)</span><br><span class="line">  d = md5ff(d, a, b, c, x[i + <span class="number">1</span>], <span class="number">12</span>, -<span class="number">389564586</span>)</span><br><span class="line">  c = md5ff(c, d, a, b, x[i + <span class="number">2</span>], <span class="number">17</span>, <span class="number">606105819</span>)</span><br><span class="line">  b = md5ff(b, c, d, a, x[i + <span class="number">3</span>], <span class="number">22</span>, -<span class="number">1044525330</span>)</span><br><span class="line">  a = md5ff(a, b, c, d, x[i + <span class="number">4</span>], <span class="number">7</span>, -<span class="number">176418897</span>)</span><br><span class="line">  d = md5ff(d, a, b, c, x[i + <span class="number">5</span>], <span class="number">12</span>, <span class="number">1200080426</span>)</span><br><span class="line">  c = md5ff(c, d, a, b, x[i + <span class="number">6</span>], <span class="number">17</span>, -<span class="number">1473231341</span>)</span><br><span class="line">  b = md5ff(b, c, d, a, x[i + <span class="number">7</span>], <span class="number">22</span>, -<span class="number">45705983</span>)</span><br><span class="line">  a = md5ff(a, b, c, d, x[i + <span class="number">8</span>], <span class="number">7</span>, <span class="number">1770035416</span>)</span><br><span class="line">  d = md5ff(d, a, b, c, x[i + <span class="number">9</span>], <span class="number">12</span>, -<span class="number">1958414417</span>)</span><br><span class="line">  c = md5ff(c, d, a, b, x[i + <span class="number">10</span>], <span class="number">17</span>, -<span class="number">42063</span>)</span><br><span class="line">  b = md5ff(b, c, d, a, x[i + <span class="number">11</span>], <span class="number">22</span>, -<span class="number">1990404162</span>)</span><br><span class="line">  a = md5ff(a, b, c, d, x[i + <span class="number">12</span>], <span class="number">7</span>, <span class="number">1804603682</span>)</span><br><span class="line">  d = md5ff(d, a, b, c, x[i + <span class="number">13</span>], <span class="number">12</span>, -<span class="number">40341101</span>)</span><br><span class="line">  c = md5ff(c, d, a, b, x[i + <span class="number">14</span>], <span class="number">17</span>, -<span class="number">1502002290</span>)</span><br><span class="line">  b = md5ff(b, c, d, a, x[i + <span class="number">15</span>], <span class="number">22</span>, <span class="number">1236535329</span>)</span><br><span class="line"></span><br><span class="line">  a = md5gg(a, b, c, d, x[i + <span class="number">1</span>], <span class="number">5</span>, -<span class="number">165796510</span>)</span><br><span class="line">  d = md5gg(d, a, b, c, x[i + <span class="number">6</span>], <span class="number">9</span>, -<span class="number">1069501632</span>)</span><br><span class="line">  c = md5gg(c, d, a, b, x[i + <span class="number">11</span>], <span class="number">14</span>, <span class="number">643717713</span>)</span><br><span class="line">  b = md5gg(b, c, d, a, x[i], <span class="number">20</span>, -<span class="number">373897302</span>)</span><br><span class="line">  a = md5gg(a, b, c, d, x[i + <span class="number">5</span>], <span class="number">5</span>, -<span class="number">701558691</span>)</span><br><span class="line">  d = md5gg(d, a, b, c, x[i + <span class="number">10</span>], <span class="number">9</span>, <span class="number">38016083</span>)</span><br><span class="line">  c = md5gg(c, d, a, b, x[i + <span class="number">15</span>], <span class="number">14</span>, -<span class="number">660478335</span>)</span><br><span class="line">  b = md5gg(b, c, d, a, x[i + <span class="number">4</span>], <span class="number">20</span>, -<span class="number">405537848</span>)</span><br><span class="line">  a = md5gg(a, b, c, d, x[i + <span class="number">9</span>], <span class="number">5</span>, <span class="number">568446438</span>)</span><br><span class="line">  d = md5gg(d, a, b, c, x[i + <span class="number">14</span>], <span class="number">9</span>, -<span class="number">1019803690</span>)</span><br><span class="line">  c = md5gg(c, d, a, b, x[i + <span class="number">3</span>], <span class="number">14</span>, -<span class="number">187363961</span>)</span><br><span class="line">  b = md5gg(b, c, d, a, x[i + <span class="number">8</span>], <span class="number">20</span>, <span class="number">1163531501</span>)</span><br><span class="line">  a = md5gg(a, b, c, d, x[i + <span class="number">13</span>], <span class="number">5</span>, -<span class="number">1444681467</span>)</span><br><span class="line">  d = md5gg(d, a, b, c, x[i + <span class="number">2</span>], <span class="number">9</span>, -<span class="number">51403784</span>)</span><br><span class="line">  c = md5gg(c, d, a, b, x[i + <span class="number">7</span>], <span class="number">14</span>, <span class="number">1735328473</span>)</span><br><span class="line">  b = md5gg(b, c, d, a, x[i + <span class="number">12</span>], <span class="number">20</span>, -<span class="number">1926607734</span>)</span><br><span class="line"></span><br><span class="line">  a = md5hh(a, b, c, d, x[i + <span class="number">5</span>], <span class="number">4</span>, -<span class="number">378558</span>)</span><br><span class="line">  d = md5hh(d, a, b, c, x[i + <span class="number">8</span>], <span class="number">11</span>, -<span class="number">2022574463</span>)</span><br><span class="line">  c = md5hh(c, d, a, b, x[i + <span class="number">11</span>], <span class="number">16</span>, <span class="number">1839030562</span>)</span><br><span class="line">  b = md5hh(b, c, d, a, x[i + <span class="number">14</span>], <span class="number">23</span>, -<span class="number">35309556</span>)</span><br><span class="line">  a = md5hh(a, b, c, d, x[i + <span class="number">1</span>], <span class="number">4</span>, -<span class="number">1530992060</span>)</span><br><span class="line">  d = md5hh(d, a, b, c, x[i + <span class="number">4</span>], <span class="number">11</span>, <span class="number">1272893353</span>)</span><br><span class="line">  c = md5hh(c, d, a, b, x[i + <span class="number">7</span>], <span class="number">16</span>, -<span class="number">155497632</span>)</span><br><span class="line">  b = md5hh(b, c, d, a, x[i + <span class="number">10</span>], <span class="number">23</span>, -<span class="number">1094730640</span>)</span><br><span class="line">  a = md5hh(a, b, c, d, x[i + <span class="number">13</span>], <span class="number">4</span>, <span class="number">681279174</span>)</span><br><span class="line">  d = md5hh(d, a, b, c, x[i], <span class="number">11</span>, -<span class="number">358537222</span>)</span><br><span class="line">  c = md5hh(c, d, a, b, x[i + <span class="number">3</span>], <span class="number">16</span>, -<span class="number">722521979</span>)</span><br><span class="line">  b = md5hh(b, c, d, a, x[i + <span class="number">6</span>], <span class="number">23</span>, <span class="number">76029189</span>)</span><br><span class="line">  a = md5hh(a, b, c, d, x[i + <span class="number">9</span>], <span class="number">4</span>, -<span class="number">640364487</span>)</span><br><span class="line">  d = md5hh(d, a, b, c, x[i + <span class="number">12</span>], <span class="number">11</span>, -<span class="number">421815835</span>)</span><br><span class="line">  c = md5hh(c, d, a, b, x[i + <span class="number">15</span>], <span class="number">16</span>, <span class="number">530742520</span>)</span><br><span class="line">  b = md5hh(b, c, d, a, x[i + <span class="number">2</span>], <span class="number">23</span>, -<span class="number">995338651</span>)</span><br><span class="line"></span><br><span class="line">  a = md5ii(a, b, c, d, x[i], <span class="number">6</span>, -<span class="number">198630844</span>)</span><br><span class="line">  d = md5ii(d, a, b, c, x[i + <span class="number">7</span>], <span class="number">10</span>, <span class="number">1126891415</span>)</span><br><span class="line">  c = md5ii(c, d, a, b, x[i + <span class="number">14</span>], <span class="number">15</span>, -<span class="number">1416354905</span>)</span><br><span class="line">  b = md5ii(b, c, d, a, x[i + <span class="number">5</span>], <span class="number">21</span>, -<span class="number">57434055</span>)</span><br><span class="line">  a = md5ii(a, b, c, d, x[i + <span class="number">12</span>], <span class="number">6</span>, <span class="number">1700485571</span>)</span><br><span class="line">  d = md5ii(d, a, b, c, x[i + <span class="number">3</span>], <span class="number">10</span>, -<span class="number">1894986606</span>)</span><br><span class="line">  c = md5ii(c, d, a, b, x[i + <span class="number">10</span>], <span class="number">15</span>, -<span class="number">1051523</span>)</span><br><span class="line">  b = md5ii(b, c, d, a, x[i + <span class="number">1</span>], <span class="number">21</span>, -<span class="number">2054922799</span>)</span><br><span class="line">  a = md5ii(a, b, c, d, x[i + <span class="number">8</span>], <span class="number">6</span>, <span class="number">1873313359</span>)</span><br><span class="line">  d = md5ii(d, a, b, c, x[i + <span class="number">15</span>], <span class="number">10</span>, -<span class="number">30611744</span>)</span><br><span class="line">  c = md5ii(c, d, a, b, x[i + <span class="number">6</span>], <span class="number">15</span>, -<span class="number">1560198380</span>)</span><br><span class="line">  b = md5ii(b, c, d, a, x[i + <span class="number">13</span>], <span class="number">21</span>, <span class="number">1309151649</span>)</span><br><span class="line">  a = md5ii(a, b, c, d, x[i + <span class="number">4</span>], <span class="number">6</span>, -<span class="number">145523070</span>)</span><br><span class="line">  d = md5ii(d, a, b, c, x[i + <span class="number">11</span>], <span class="number">10</span>, -<span class="number">1120210379</span>)</span><br><span class="line">  c = md5ii(c, d, a, b, x[i + <span class="number">2</span>], <span class="number">15</span>, <span class="number">718787259</span>)</span><br><span class="line">  b = md5ii(b, c, d, a, x[i + <span class="number">9</span>], <span class="number">21</span>, -<span class="number">343485551</span>)</span><br><span class="line"></span><br><span class="line">  a = safeAdd(a, olda)</span><br><span class="line">  b = safeAdd(b, oldb)</span><br><span class="line">  c = safeAdd(c, oldc)</span><br><span class="line">  d = safeAdd(d, oldd)</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> [a, b, c, d]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4-遗留的问题"><a class="markdownIt-Anchor" href="#4-遗留的问题"></a> 4 遗留的问题</h1><h2 id="41-四个非线性函数是如何设计的"><a class="markdownIt-Anchor" href="#41-四个非线性函数是如何设计的"></a> 4.1 四个非线性函数是如何设计的</h2><p>在循环加工中，<code>(b&amp;c) | (not(b)&amp;d) = 98BADCFE</code>，即为一次非线性函数计算。</p><table><thead><tr><th>#</th><th>非线性函数</th></tr></thead><tbody><tr><td>1</td><td><code>F(X,Y,Z) = (X &amp; Y) | ((~X) &amp; Z);</code></td></tr><tr><td>2</td><td><code>G(X,Y,Z) = (X &amp; Z) | (Y &amp; (~Z));</code></td></tr><tr><td>3</td><td><code>H(X,Y,Z) = X ^ Y ^ Z;</code></td></tr><tr><td>4</td><td><code>I(X,Y,Z) = Y ^ (X | (~Z));</code></td></tr></tbody></table><p>这四个非线性函数分别被封装到四个操作函数中，即循环加工中的 <code>md5ff</code> 函数就为操作函数之一，还有 <code>md5gg</code>、<code>md5hh</code> 和 <code>md5ii</code>。</p><h2 id="42-循环左移偏移量是如何设计的"><a class="markdownIt-Anchor" href="#42-循环左移偏移量是如何设计的"></a> 4.2 循环左移偏移量是如何设计的</h2><p>四个操作函数中，都附带了参数作为循环左移偏移量，阅读代码后，发现循环左移偏移量分为如下四组：</p><table><thead><tr><th>#</th><th>左循环偏移量</th></tr></thead><tbody><tr><td>1</td><td><code>7, 12, 17, 22</code></td></tr><tr><td>2</td><td><code>5, 9, 14, 20</code></td></tr><tr><td>3</td><td><code>4, 11, 16, 23</code></td></tr><tr><td>4</td><td><code>6, 10, 15, 21</code></td></tr></tbody></table><h2 id="43-正弦补充值是如何设计的"><a class="markdownIt-Anchor" href="#43-正弦补充值是如何设计的"></a> 4.3 正弦补充值是如何设计的</h2><p>四个操作函数中，最后一个参数为正弦补充值，下面是十进制表示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = md5ff(a, b, c, d, x[i], <span class="number">7</span>, -<span class="number">680876936</span>)</span><br><span class="line">d = md5ff(d, a, b, c, x[i + <span class="number">1</span>], <span class="number">12</span>, -<span class="number">389564586</span>)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure><p>转换为十六进制表示为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = md5ff(a, b, c, d, x[i], <span class="number">7</span>, <span class="number">0xD76AA478</span>)</span><br><span class="line">d = md5ff(d, a, b, c, x[i + <span class="number">1</span>], <span class="number">12</span>, <span class="number">0xE8C7B756</span>)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure><h1 id="5-md5在线计算"><a class="markdownIt-Anchor" href="#5-md5在线计算"></a> 5 MD5在线计算</h1><iframe height="360" width="100%" src="https://syzdev.gitee.io/page/p/md5.html" frameborder="0"></iframe><h1 id="6-总结"><a class="markdownIt-Anchor" href="#6-总结"></a> 6 总结</h1><p>目前只对 MD5 算法有个初步的了解，而上面遗留的问题正是 MD5 算法的核心实现部分，不禁让人感叹算法设计者的脑洞。</p><p>从个人目前的认知来看，算法设计的数据和计算函数，目的只有一个，就是想方设法的打乱数据并直接让每一位都参与进来，这也就是为什么任何一位的变化，都会影响最后的哈希值，如明文：<code>Hello syzdev</code>的哈希值为：<code>704558b48d6370fb71533d5ae50727b4</code>，在改动其中一个字母后明文变为 <code>Hallo syzdev</code> ，其产生的哈希值为：<code>2433084e178a2331d40c2ea16fd664fa</code>，这两个哈希值看起来找不出有任何关联，即使两者的明文仅有一个字母差别。</p><p>MD5 将整个数据拆分成多个组，再由每个组内分别计算累加，有些资料将分组过程分为 3 步，即先将整个数据按 512 位分块，再把每个 512 位分成 4 个 128 位数据块，最后将 4 个 128 位的数据块依次送到不同的散列函数进行 4 轮计算。每一轮又都按 32 位的小数据块进行复杂的运算，一直到最后计算出 MD5 报文摘要代码，这也就是为什么 MD5 能把不定长的数据最后都变成 128 位的哈希值。</p><p>可以发现，MD5 的处理函数，包括非线性函数和操作函数都包含了多个参数，而且还是变动的参数，这也就保证了 MD5 是个不可逆的算法。举个简单的例子，如有函数 z=f(x)=5<em>x ，此时知道 z=10 ，那么显然得到 x=2 ；如函数为 z=f(x, y)=x</em>y ，此时知道 z=10 ，这种情况下是无法推断出 x 和 y 的值的，这样也就保证了 MD5 算法具有不可逆性。</p><p>正是因为 MD5 算法具有不可逆性，所以目前存在的破解算法都不是恢复明文，而是只要能找到能生成此摘要的其中一个原文即可，这种破解方法叫做“碰撞”。如 H(A) = M ， H(B) = M ，则称 B 为破解结果，此时 A 和 B 可能相等，也可能不等。</p></div><div class="prev-or-next"><div class="post-foot-next"><a href="/2020/03/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9A%E5%A4%A7%E5%AE%B9%E9%87%8F%E5%AD%98%E5%82%A8/" target="_self"><i class="iconfont icon-chevronleft"></i> <span>上一页</span></a></div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime" title="更新时间"></i> 2020-04-16 21:14:07 </span><span class="post-tags"><i class="iconfont icon-tags" title="标签"></i> <span class="span--tag"><a href="/tags/%E5%85%B6%E4%BB%96/" title="其他"><b>#</b> 其他</a></span></span></div><div class="post-foot-prev"><a href="/2020/05/01/HTTPS%E6%98%AF%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C%E7%9A%84/" target="_self"><span>下一页</span> <i class="iconfont icon-chevronright"></i></a></div></div></div><div id="btn-catalog" class="btn-catalog"><i class="iconfont icon-catalog"></i></div><div class="post-catalog hidden" id="catalog"><div class="title">目录</div><div class="catalog-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-md5-%E7%AE%80%E4%BB%8B"><span class="toc-text">1 MD5 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-md5-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">2 MD5 实现步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%B0%86%E6%98%8E%E6%96%87%E5%8F%98%E4%B8%BA-ascii-%E7%A0%81"><span class="toc-text">2.1 将明文变为 ASCII 码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E5%A1%AB%E5%85%85%E5%92%8C%E9%99%84%E5%8A%A0"><span class="toc-text">2.2 填充和附加</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E5%88%86%E7%BB%84"><span class="toc-text">2.3 分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-text">2.4 预处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-%E5%BE%AA%E7%8E%AF%E5%8A%A0%E5%B7%A5"><span class="toc-text">2.5 循环加工</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-blueimp-md5-%E6%BA%90%E7%A0%81"><span class="toc-text">3 blueimp-md5 源码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E9%81%97%E7%95%99%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">4 遗留的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-%E5%9B%9B%E4%B8%AA%E9%9D%9E%E7%BA%BF%E6%80%A7%E5%87%BD%E6%95%B0%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84"><span class="toc-text">4.1 四个非线性函数是如何设计的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB%E5%81%8F%E7%A7%BB%E9%87%8F%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84"><span class="toc-text">4.2 循环左移偏移量是如何设计的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E6%AD%A3%E5%BC%A6%E8%A1%A5%E5%85%85%E5%80%BC%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E7%9A%84"><span class="toc-text">4.3 正弦补充值是如何设计的</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-md5%E5%9C%A8%E7%BA%BF%E8%AE%A1%E7%AE%97"><span class="toc-text">5 MD5在线计算</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%80%BB%E7%BB%93"><span class="toc-text">6 总结</span></a></li></ol></div></div><script src="/js/catalog.js"></script><div class="comments-container"></div></div><div class="footer"><div class="social"><ul><li><a title="github" target="_blank" rel="noopener" href="https://github.com/syzdev"><i class="iconfont icon-github"></i></a></li></ul></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a></div></div></div><div class="tools-bar"><div class="back-to-top tools-bar-item hidden"><a href="javascript: void(0)"><i class="iconfont icon-chevronup"></i></a></div><script src="/js/backtotop.js"></script><div class="search-icon tools-bar-item" id="search-icon"><a href="javascript: void(0)"><i class="iconfont icon-search"></i></a></div><div class="search-overlay hidden"><div class="search-content" tabindex="0"><div class="search-title"><span class="search-icon-input"><a href="javascript: void(0)"><i class="iconfont icon-search"></i> </a></span><input type="text" class="search-input" id="search-input" placeholder="搜索..."> <span class="search-close-icon" id="search-close-icon"><a href="javascript: void(0)"><i class="iconfont icon-close"></i></a></span></div><div class="search-result" id="search-result"></div></div></div><script type="text/javascript">var inputArea=document.querySelector("#search-input"),searchOverlayArea=document.querySelector(".search-overlay");function openOrHideSearchContent(){searchOverlayArea.classList.contains("hidden")?(searchOverlayArea.classList.remove("hidden"),document.body.classList.add("hidden")):(searchOverlayArea.classList.add("hidden"),document.body.classList.remove("hidden"))}function blurSearchContent(e){e.target===searchOverlayArea&&openOrHideSearchContent()}inputArea.onclick=function(){getSearchFile(),this.onclick=null},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},document.querySelector("#search-icon").addEventListener("click",openOrHideSearchContent,!1),document.querySelector("#search-close-icon").addEventListener("click",openOrHideSearchContent,!1),searchOverlayArea.addEventListener("click",blurSearchContent,!1);var searchFunc=function(e,t,n){"use strict";var r=document.getElementById(t),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();a.innerHTML="",r.addEventListener("input",(function(){var e='<ul class="search-result-list">',n=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach((function(t){var r=!0;t.title&&""!==t.title.trim()||(t.title="Untitled");var a=t.title.trim(),c=a.toLowerCase(),s=t.content.trim().replace(/<[^>]+>/g,""),i=s.toLowerCase(),l=t.url,o=-1,u=-1,h=-1;if(""!==i?n.forEach((function(e,t){o=c.indexOf(e),u=i.indexOf(e),o<0&&u<0?r=!1:(u<0&&(u=0),0==t&&(h=u))})):r=!1,r){e+="<li><a href='"+l+"' class='search-result-title'>"+a+"</a>";var d=s;if(h>=0){var p=h-20,f=h+80;p<0&&(p=0),0==p&&(f=100),f>d.length&&(f=d.length);var m=d.substr(p,f);n.forEach((function(e){var t=new RegExp(e,"gi");m=m.replace(t,'<span class="search-keyword">'+e+"</span>")})),e+='<p class="search-result-abstract">'+m+"...</p>"}e+="</li>"}})),-1===(e+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";a.innerHTML=e}}))},error:function(e,t,n){a.innerHTML="",404===e.status?a.innerHTML="<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>":a.innerHTML="<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>"}}),$(document).on("click","#search-close-icon",(function(){$("#search-input").val(""),$("#search-result").html("")}))},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")}</script><div class="tools-bar-item theme-icon" id="switch-color-scheme"><a href="javascript: void(0)"><i id="theme-icon" class="iconfont icon-moon"></i></a></div><script src="/js/colorscheme.js"></script></div></div></body></html>