<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;light&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><link rel="icon" href="https://cdn.u1.huluxia.com/g3/M03/4D/84/wKgBOV6fGZWATbp6AAAML1Rr8NY150.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="syz"><meta name="keywords" content=""><title>层叠上下文、层叠顺序和层叠等级 - syzdev</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"yoursite.com",root:"/",version:"1.8.10",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:1},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:35vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>😄 syzdev</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://cdn.u1.huluxia.com/g3/M02/4D/6C/wKgBOV6fEU2AXFGSAAJ7A1Fp7rw147.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="层叠上下文、层叠顺序和层叠等级"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-03-19 16:20" pubdate>2022年3月19日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 29 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">层叠上下文、层叠顺序和层叠等级</h1><div class="markdown-body"><h1 id="0-前言"><a class="markdownIt-Anchor" href="#0-前言"></a> 0 前言</h1><p>在讨论层叠上下文和层叠顺序之前先举个例子，创建两个<code>box</code>，其中红色<code>box</code>长<code>200px</code>宽<code>400px</code>，蓝色<code>box</code>长<code>400px</code>宽<code>200px</code>：</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;blue-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.box</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">z-index</span>: auto; <span class="hljs-comment">/* 默认值 */</span><br>&#125;<br><br><span class="hljs-selector-class">.blue-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background</span>: blue;<br>  <span class="hljs-attribute">position</span>: absolute;<br>&#125;<br><br><span class="hljs-selector-class">.red-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">background</span>: red;<br>  <span class="hljs-attribute">position</span>: absolute;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>效果如下：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647346961862-431926a6-a6d2-4878-9f25-62a15d46afa4.png" srcset="/img/loading.gif" lazyload alt=""><br>在此引出两个问题：</p><ol><li>为什么<code>red-box</code>在<code>blue-box</code>之上？</li><li>怎么让<code>blue-box</code>在<code>red-box</code>之上？</li></ol><h1 id="1-层叠上下文"><a class="markdownIt-Anchor" href="#1-层叠上下文"></a> 1 层叠上下文</h1><h2 id="11-层叠上下文概念"><a class="markdownIt-Anchor" href="#11-层叠上下文概念"></a> 1.1 层叠上下文概念</h2><p>之所以元素在浏览器中有显示上下之分，是因为浏览器将页面构想成一个3D的坐标轴，而屏幕的正面即为坐标轴的<code>z轴</code>，如图所示：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647347974680-ee26f16f-77cf-4504-b158-c2e2f76b0323.png" srcset="/img/loading.gif" lazyload alt=""><br>每个页面都有一个默认的层叠上下文，根元素<code>html</code>就是一个层叠上下文，而且其中还可能含有其他的层叠上下文，在同一个层叠上下文中，元素出现的上下顺序叫做层叠等级，决定层叠等级的规则叫做层叠顺序。</p><p>前面提到根元素<code>html</code>就是一个层叠上下文，并且还可以在其中创建其他层叠上下文，在CSS中每个层叠上下文的层叠层都是独立的，不受其他层叠上下文的影响，如下图所示，跟元素<code>html</code>之中又有三个独立的层叠上下文，三个独立的层叠上下文中各自有自己的层叠层：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647352533687-d855444d-f2d4-4b9e-bf49-f1c9e269f29f.png" srcset="/img/loading.gif" lazyload alt=""></p><h2 id="12-创建层叠上下文的方法"><a class="markdownIt-Anchor" href="#12-创建层叠上下文的方法"></a> 1.2 创建层叠上下文的方法</h2><p>满足以下任意一种情况即可创建一个层叠上下文：</p><ul><li>根元素<code>html</code>（属于被动创建层叠上下文）</li><li><code>position</code>值为非<code>static</code>且<code>z-index</code>值不为<code>auto</code>。</li><li>弹性盒模型<code>flex</code>中的元素，且<code>z-index</code>值不为<code>auto</code>。</li><li><code>opacity</code>属性值小于<code>1</code>的元素。</li><li>…</li></ul><p>以上列举的是常见的方法，更多方法可查阅文档<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context">MDN-层叠上下文</a>。</p><h1 id="2-层叠等级"><a class="markdownIt-Anchor" href="#2-层叠等级"></a> 2 层叠等级</h1><p>层叠等级决定了同一个层叠上下文中的层叠顺序，并且元素的层叠等级只有在同一个层叠上下文中比较才有意义，如1.1节中三个独立层叠上下文内的<code>A</code>、<code>B</code>、<code>C</code>三个元素，因为这三个元素属于不同的层叠上下文，所以各自拥有独立的层叠顺序，所以将其比较是没有意义的。</p><p>在1.1节中的例子里，<code>A</code>、<code>B</code>、<code>C</code>三个元素是没有发生位置重叠的，若此时三个元素发生了位置重叠，如下图所示：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647352716783-a30dea21-4bdc-4fb1-b328-330387080b02.png" srcset="/img/loading.gif" lazyload alt=""><br>在进行比较时，由于三个元素属于不同的层叠上下文，所以就要找对应父级元素所在的上下文，即要确定<code>red</code>、<code>green</code>、<code>blue</code>三个层叠上下文的层叠等级，因为这<code>red</code>、<code>green</code>、<code>blue</code>都属于根元素<code>html</code>的层叠上下文中，所以能够进行比较，最终根据父级元素的层叠等级来确定三个子元素<code>A</code>、<code>B</code>、<code>C</code>的显示顺序。</p><h1 id="3-被误解的z-index"><a class="markdownIt-Anchor" href="#3-被误解的z-index"></a> 3 被误解的<code>z-index</code></h1><p>举个例子如下图所示，<code>red</code>在<code>green</code>和<code>blue</code>之下，所以元素<code>A</code>也在<code>B</code>和<code>C</code>之下，那么怎么让<code>A</code>显示在最上面呢？<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647353916225-483420de-070c-4b39-9323-6a9918ca2be9.png" srcset="/img/loading.gif" lazyload alt=""><br>相信有人给定会给出答案：给元素<code>A</code>设置CSS样式：<code>z-index: 9999;</code>这样元素<code>A</code>就显示在所有元素之上了。其实这种说法是错误的，这也是很多人对于<code>z-index</code>的误解。</p><p>确实，当需要指定不同的排列顺序时，只要给元素指定一个<code>z-index</code>数值，该数值必须是一个整数（正整数和负整数），这个数值表示了元素在<code>z</code>轴的位置，数值越大，元素越在<code>z</code>轴的最上方。但是，<code>z-index</code>的使用是有先决条件的：</p><ol><li><code>z-index</code>只适用于定位的元素，对非定位元素无效，如果一个元素没有指定<code>z-index</code>，那么其默认值是<code>auto</code>（<code>z-index</code>的<code>0</code>层）。</li><li>元素的<code>z-index</code>值只有在同一个层叠上下文中才有意义。</li></ol><p>根据第两个先决条件可知，由于元素<code>A</code>、<code>B</code>、<code>C</code>不属于同一个层叠上下文，所以即使给元素<code>A</code>设置CSS样式：<code>z-index: 9999;</code>也无法将<code>A</code>元素置于所有元素之上。</p><h1 id="4-层叠顺序"><a class="markdownIt-Anchor" href="#4-层叠顺序"></a> 4 层叠顺序</h1><p>当元素发生重叠时，下图描述了7种元素类型对应的层叠顺序：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647353123791-b1b4c84d-dca5-4674-8cee-09e2174ee7d5.png" srcset="/img/loading.gif" lazyload alt=""><br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647409585474-85b7ed3d-29dc-424c-8c1b-f802cb9909b9.png" srcset="/img/loading.gif" lazyload alt=""><br>图中的顺序很好理解，但是有几点值得注意：</p><ol><li>内联元素（<code>inline</code>/<code>inline-block</code>）的层叠顺序高于浮动<code>float</code>元素和块级<code>block</code>元素：这个容易理解，网页的重点是显示内容，如内联元素<code>span</code>用于定义文本块，内联元素<code>img</code>用于显示图片，所以理所当然的使这类表示内容的内联元素拥有更高的层叠顺序。</li><li>浮动<code>float</code>元素的层叠顺序高于块级<code>block</code>元素。</li><li>虽说<code>z-index:auto</code>和<code>z-index:0</code>在同一层叠顺序，但是两者有着重要的区别：参照1.2节中创建层叠上下文的方法，<code>z-index:auto</code>是不会创建一个新的层叠上下文的，而<code>z-index:0</code>能够创建一个新的层叠上下文。</li></ol><p>另外可以通过下面的图片对层叠顺序进行记忆：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647409449624-dfbfac6f-0830-45d2-bd93-ff5212dfbdc7.png" srcset="/img/loading.gif" lazyload alt=""><br>除去<code>z-index</code>相关的层叠顺序，由表示内容的内联元素层叠顺序最高，其次是表示内容布局的浮动元素和块级元素，最后是用于装饰内容的层叠上下文的背景和边框。</p><h1 id="5-判断层叠顺序的方法"><a class="markdownIt-Anchor" href="#5-判断层叠顺序的方法"></a> 5 判断层叠顺序的方法</h1><ol><li>在同一个层叠上下文中，其内部元素的层叠顺序按照第4章中的层叠顺序图来排列。</li><li>在同一个层叠上下文中，若两个元素的层叠顺序相同，则后面的元素会在前面的元素之上。</li><li>在不同层叠上下文的情况下比较两个元素的层叠顺序，需要向上查询其父元素所在的层叠上下文，直到两者的某一级父元素在同一层，再比较这两个父级元素的层叠顺序。</li></ol><h1 id="6-前言中的问题"><a class="markdownIt-Anchor" href="#6-前言中的问题"></a> 6 前言中的问题</h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647346961862-431926a6-a6d2-4878-9f25-62a15d46afa4.png" srcset="/img/loading.gif" lazyload alt=""><br>前言中留下了两个问题：</p><ol><li>为什么<code>red-box</code>在<code>blue-box</code>之上？<ol><li>首先判断两个两个<code>box</code>是否在同一个层叠上下文中，由于<code>red-box</code>和<code>blue-box</code>都拥有一个父元素<code>box</code>，父元素<code>box</code>中含有非<code>static</code>定位属性，但是<code>z-index</code>为<code>auto</code>，所以父元素<code>box</code>并没有形成单独的层叠上下文，所以这两个<code>box</code>同属于根元素<code>html</code>的层叠上下文中，因此<code>red-box</code>和<code>blue-box</code>也属于同一个层叠上下文。</li><li>此时再判断<code>red-box</code>和<code>blue-box</code>的层叠顺序，由于<code>red-box</code>和<code>blue-box</code>属于同种类型的元素，两者拥有相同的层叠顺序，所以后出现的<code>red-box</code>会位于<code>blue-box</code>之上。</li></ol></li><li>怎么让<code>blue-box</code>在<code>red-box</code>之上？</li></ol><p>（1）方案一：根据对于问题1的分析，可以将<code>red-box</code>和<code>blue-box</code>互换位置，如下代码，这样<code>blue-box</code>就成为了后出现的元素：</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;blue-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>（2）方案二：由于<code>red-box</code>和<code>blue-box</code>属于同一个层叠上下文，所以可以通过<code>z-index</code>属性将<code>blue-box</code>置于<code>red-box</code>之上，如下代码，给<code>blue-box</code>添加<code>z-index: 2</code>，给<code>red-box</code>添加<code>z-index: 1</code>：</p><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.blue-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background</span>: blue;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>; <span class="hljs-comment">/* 添加z-index */</span><br>&#125;<br><br><span class="hljs-selector-class">.red-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">background</span>: red;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>; <span class="hljs-comment">/* 添加z-index */</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>（3）方案三：方案一和方案二都是在同一个层叠上下文的条件下，方案三将<code>red-box</code>和<code>blue-box</code>置于两个不同的层叠上下文，修改代码如下：</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box1&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;blue-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box2&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red-box&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></div></td></tr></table></figure><p>通过将父级<code>box1</code>和<code>box2</code>的<code>z-index</code>修改为<code>0</code>而创建了两个单独的层叠上下文。</p><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span>, <span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* 创建层叠上下文 */</span><br>&#125;<br><br><span class="hljs-selector-class">.blue-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">background</span>: blue;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-selector-class">.red-box</span> &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;<br>  <span class="hljs-attribute">background</span>: red;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>注意：此时<code>red-box</code>和<code>blue-box</code>的<code>z-index</code>还保留了，效果如图：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647411887089-433f9531-3d72-4cbb-b856-3707e9a8cf9a.png" srcset="/img/loading.gif" lazyload alt=""><br>可以发现<code>red-box</code>和<code>blue-box</code>的<code>z-index</code>失效了，即使<code>blue-box</code>的<code>z-index</code>比<code>red-box</code>大也无济于事，这也正好验证了关键结论“元素的<code>z-index</code>值只有在同一个层叠上下文中才有意义”。这里之所以<code>red-box</code>还在<code>blue-box</code>之上是因为其父级<code>box</code>在根元素<code>html</code>层叠上下文中的层叠顺序。</p><p>所以在这个例子中，想要实现<code>blue-box</code>在<code>red-box</code>之上，需要通过<code>z-index</code>修改<code>box1</code>和<code>box2</code>的层叠顺序：</p><figure class="highlight css"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.box1</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-selector-class">.box2</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><p>效果如下：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/1602549/1647412222881-02149a6c-d3be-42d8-bce3-370cf83b2598.png" srcset="/img/loading.gif" lazyload alt=""></p><h1 id="7-总结"><a class="markdownIt-Anchor" href="#7-总结"></a> 7 总结</h1><p>在实际开发中，需要牢记的内容有：</p><ol><li>创建层叠上下文的方法：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context">MDN-层叠上下文</a></li><li><code>z-index</code>的使用条件：必须是定位元素且比较<code>z-index</code>的元素在同一个层叠上下文，参阅第3章内容。</li><li>层叠顺序：可以按照如下方法记忆（由高到低）：<ol><li>正<code>z-index</code></li><li>默认值<code>z-index:auto</code>、<code>z-index:0</code>（注意两者区别，参阅第4章内容）</li><li>表示内容的<code>inline</code>/<code>inline-block</code></li><li>表示布局的<code>float</code>浮动元素和<code>block</code>块级元素</li><li>负<code>z-index</code></li><li>表示装饰的层叠上下文的背景和边框</li></ol></li><li>判断层叠顺序的方法，参阅第5章内容。</li></ol></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E9%87%8D%E5%AD%A6CSS%E7%B3%BB%E5%88%97/">重学CSS系列</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"></article><article class="post-next col-6"><a href="/2022/03/17/BFC%E6%9C%BA%E5%88%B6/"><span class="hidden-mobile">BFC机制</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/js/local-search.js"></script><script>$("#local-search-input").on("click",(function(){searchFunc("/local-search.xml","local-search-input","local-search-result")})),$("#modalSearch").on("shown.bs.modal",(function(){$("#local-search-input").focus()}))</script><script src="/js/boot.js"></script></body></html>